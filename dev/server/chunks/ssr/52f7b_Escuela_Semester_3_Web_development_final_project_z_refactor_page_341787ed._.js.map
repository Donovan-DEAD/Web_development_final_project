{
  "version": 3,
  "sources": [],
  "sections": [
    {"offset": {"line": 4, "column": 0}, "map": {"version":3,"sources":["file:///C:/Users/donov/OneDrive/Escritorio/Escuela/Semester_3/Web_development_final_project/z/refactor_page/src/components/Toast.tsx"],"sourcesContent":["\"use client\";\n\nimport React, { useState, useEffect } from 'react';\nimport Snackbar from '@mui/material/Snackbar';\nimport MuiAlert, { AlertProps } from '@mui/material/Alert';\nimport IconButton from '@mui/material/IconButton';\nimport CloseIcon from '@mui/icons-material/Close';\nimport Typography from '@mui/material/Typography';\nimport Box from '@mui/material/Box';\n\ninterface ToastProps {\n  message: string | null;\n  // Optional: type of toast (e.g., 'error', 'success', 'info', 'warning')\n  severity?: 'error' | 'warning' | 'info' | 'success'; \n  duration?: number; // Duration in milliseconds, defaults to 5000\n}\n\n// Custom Alert component to match existing CSS classes if needed\nconst Alert = React.forwardRef<HTMLDivElement, AlertProps>(function Alert(\n  props,\n  ref,\n) {\n  return <MuiAlert elevation={6} ref={ref} variant=\"filled\" {...props} />;\n});\n\nconst Toast: React.FC<ToastProps> = ({ message, severity = 'error', duration = 5000 }) => {\n  const [open, setOpen] = useState(false);\n\n  useEffect(() => {\n    if (message) {\n      setOpen(true);\n    }\n  }, [message]);\n\n  const handleClose = (event?: React.SyntheticEvent | Event, reason?: string) => {\n    if (reason === 'clickaway') {\n      return;\n    }\n    setOpen(false);\n  };\n\n  if (!message) {\n    return null; // Don't render anything if there's no message\n  }\n\n  const action = (\n    <IconButton\n      size=\"small\"\n      aria-label=\"close\"\n      color=\"inherit\"\n      onClick={handleClose}\n    >\n      <CloseIcon fontSize=\"small\" />\n    </IconButton>\n  );\n\n  return (\n    <Snackbar\n      open={open}\n      autoHideDuration={duration}\n      onClose={handleClose}\n      anchorOrigin={{ vertical: 'top', horizontal: 'center' }}\n    >\n      <Alert onClose={handleClose} severity={severity} sx={{ width: '100%' }} className=\"toast-header\">\n        <Box sx={{ display: 'flex', justifyContent: 'space-between', alignItems: 'center', width: '100%' }}>\n          <Typography variant=\"body1\" sx={{ fontWeight: 'bold' }}>\n            {severity === 'error' ? 'Error' : 'Message'} {/* Default to Error or Message */}\n          </Typography>\n          {action}\n        </Box>\n        <Typography variant=\"body2\" className=\"toast-body\">\n          {message}\n        </Typography>\n      </Alert>\n    </Snackbar>\n  );\n};\n\nexport default Toast;\n"],"names":[],"mappings":";;;;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AARA;;;;;;;;;AAiBA,iEAAiE;AACjE,MAAM,sBAAQ,0TAAK,CAAC,UAAU,CAA6B,SAAS,MAClE,KAAK,EACL,GAAG;IAEH,qBAAO,wVAAC,+QAAQ;QAAC,WAAW;QAAG,KAAK;QAAK,SAAQ;QAAU,GAAG,KAAK;;;;;;AACrE;AAEA,MAAM,QAA8B,CAAC,EAAE,OAAO,EAAE,WAAW,OAAO,EAAE,WAAW,IAAI,EAAE;IACnF,MAAM,CAAC,MAAM,QAAQ,GAAG,IAAA,2TAAQ,EAAC;IAEjC,IAAA,4TAAS,EAAC;QACR,IAAI,SAAS;YACX,QAAQ;QACV;IACF,GAAG;QAAC;KAAQ;IAEZ,MAAM,cAAc,CAAC,OAAsC;QACzD,IAAI,WAAW,aAAa;YAC1B;QACF;QACA,QAAQ;IACV;IAEA,IAAI,CAAC,SAAS;QACZ,OAAO,MAAM,8CAA8C;IAC7D;IAEA,MAAM,uBACJ,wVAAC,yRAAU;QACT,MAAK;QACL,cAAW;QACX,OAAM;QACN,SAAS;kBAET,cAAA,wVAAC,+QAAS;YAAC,UAAS;;;;;;;;;;;IAIxB,qBACE,wVAAC,qRAAQ;QACP,MAAM;QACN,kBAAkB;QAClB,SAAS;QACT,cAAc;YAAE,UAAU;YAAO,YAAY;QAAS;kBAEtD,cAAA,wVAAC;YAAM,SAAS;YAAa,UAAU;YAAU,IAAI;gBAAE,OAAO;YAAO;YAAG,WAAU;;8BAChF,wVAAC,2QAAG;oBAAC,IAAI;wBAAE,SAAS;wBAAQ,gBAAgB;wBAAiB,YAAY;wBAAU,OAAO;oBAAO;;sCAC/F,wVAAC,yRAAU;4BAAC,SAAQ;4BAAQ,IAAI;gCAAE,YAAY;4BAAO;;gCAClD,aAAa,UAAU,UAAU;gCAAU;;;;;;;wBAE7C;;;;;;;8BAEH,wVAAC,yRAAU;oBAAC,SAAQ;oBAAQ,WAAU;8BACnC;;;;;;;;;;;;;;;;;AAKX;uCAEe"}},
    {"offset": {"line": 144, "column": 0}, "map": {"version":3,"sources":["file:///C:/Users/donov/OneDrive/Escritorio/Escuela/Semester_3/Web_development_final_project/z/refactor_page/src/components/IAToast.tsx"],"sourcesContent":["\"use client\";\n\nimport React from 'react';\nimport Toast from './Toast'; // Assuming Toast.tsx is in the same directory\n\ninterface IAToastProps {\n  message: string | null;\n  severity?: 'error' | 'warning' | 'info' | 'success';\n}\n\nconst IAToast: React.FC<IAToastProps> = ({ message, severity = 'info' }) => {\n  // This component acts as a wrapper around the generic Toast component\n  // to provide a specific context or default styling for IA assistance toasts.\n  // The original EJS partial was largely a container for a Bootstrap toast.\n\n  // The Toast component already handles the display logic (open/close, duration).\n  // We just need to pass the message and desired severity.\n  return (\n    <Toast message={message} severity={severity} />\n  );\n};\n\nexport default IAToast;\n"],"names":[],"mappings":";;;;;AAGA,uZAA6B,8CAA8C;AAH3E;;;AAUA,MAAM,UAAkC,CAAC,EAAE,OAAO,EAAE,WAAW,MAAM,EAAE;IACrE,sEAAsE;IACtE,6EAA6E;IAC7E,0EAA0E;IAE1E,gFAAgF;IAChF,yDAAyD;IACzD,qBACE,wVAAC,gPAAK;QAAC,SAAS;QAAS,UAAU;;;;;;AAEvC;uCAEe"}},
    {"offset": {"line": 176, "column": 0}, "map": {"version":3,"sources":["file:///C:/Users/donov/OneDrive/Escritorio/Escuela/Semester_3/Web_development_final_project/z/refactor_page/public/images/camera_icon.svg.mjs%20%28structured%20image%20object%20with%20data%20url%29"],"sourcesContent":["import src from \"IMAGE\";\nexport default { src, width: 800, height: 800, blurWidth: 0, blurHeight: 0};\n"],"names":[],"mappings":";;;;AAAA;;uCACe;IAAE,KAAA,8PAAG;IAAE,OAAO;IAAK,QAAQ;IAAK,WAAW;IAAG,YAAY;AAAC"}},
    {"offset": {"line": 196, "column": 0}, "map": {"version":3,"sources":["file:///C:/Users/donov/OneDrive/Escritorio/Escuela/Semester_3/Web_development_final_project/z/refactor_page/public/images/upload_icon.svg.mjs%20%28structured%20image%20object%20with%20data%20url%29"],"sourcesContent":["import src from \"IMAGE\";\nexport default { src, width: 800, height: 800, blurWidth: 0, blurHeight: 0};\n"],"names":[],"mappings":";;;;AAAA;;uCACe;IAAE,KAAA,8PAAG;IAAE,OAAO;IAAK,QAAQ;IAAK,WAAW;IAAG,YAAY;AAAC"}},
    {"offset": {"line": 216, "column": 0}, "map": {"version":3,"sources":["file:///C:/Users/donov/OneDrive/Escritorio/Escuela/Semester_3/Web_development_final_project/z/refactor_page/public/images/image_upload_already.svg.mjs%20%28structured%20image%20object%20with%20data%20url%29"],"sourcesContent":["import src from \"IMAGE\";\nexport default { src, width: 24, height: 24, blurWidth: 0, blurHeight: 0};\n"],"names":[],"mappings":";;;;AAAA;;uCACe;IAAE,KAAA,uQAAG;IAAE,OAAO;IAAI,QAAQ;IAAI,WAAW;IAAG,YAAY;AAAC"}},
    {"offset": {"line": 236, "column": 0}, "map": {"version":3,"sources":["file:///C:/Users/donov/OneDrive/Escritorio/Escuela/Semester_3/Web_development_final_project/z/refactor_page/public/images/bulb_icon.svg.mjs%20%28structured%20image%20object%20with%20data%20url%29"],"sourcesContent":["import src from \"IMAGE\";\nexport default { src, width: 800, height: 800, blurWidth: 0, blurHeight: 0};\n"],"names":[],"mappings":";;;;AAAA;;uCACe;IAAE,KAAA,4PAAG;IAAE,OAAO;IAAK,QAAQ;IAAK,WAAW;IAAG,YAAY;AAAC"}},
    {"offset": {"line": 253, "column": 0}, "map": {"version":3,"sources":["file:///C:/Users/donov/OneDrive/Escritorio/Escuela/Semester_3/Web_development_final_project/z/refactor_page/src/app/ia-assistance/IaAssistanceWrapper.tsx"],"sourcesContent":["\"use client\";\n\nimport React, { useState, useRef } from 'react';\nimport { useRouter } from 'next/navigation';\nimport IAToast from \"@/components/IAToast\"; // Using the IAToast wrapper\nimport Image from 'next/image';\n\n// Image imports\nimport CameraIcon from '../../../public/images/camera_icon.svg';\nimport UploadIcon from '../../../public/images/upload_icon.svg';\nimport ImageUploadAlreadyIcon from '../../../public/images/image_upload_already.svg';\nimport BulbIcon from '../../../public/images/bulb_icon.svg';\n\nexport default function IaAssistanceWrapper() {\n  const [context, setContext] = useState('');\n  const [imageFile, setImageFile] = useState<File | null>(null);\n  const [toastMessage, setToastMessage] = useState<string | null>(null);\n  const router = useRouter();\n  const fileInputRef = useRef<HTMLInputElement>(null);\n\n  const handleFileChange = (event: React.ChangeEvent<HTMLInputElement>) => {\n    if (event.target.files && event.target.files[0]) {\n      const file = event.target.files[0];\n      if (file.size > 10 * 1024 * 1024) { // 10MB limit\n        setToastMessage('La imagen excede el límite de 10MB.');\n        setImageFile(null);\n        if (fileInputRef.current) fileInputRef.current.value = ''; // Clear file input\n        return;\n      }\n      setImageFile(file);\n      setToastMessage(null);\n    }\n  };\n\n  const handleSubmit = async (event: React.FormEvent) => {\n    event.preventDefault();\n    setToastMessage(null); // Clear previous messages\n\n    if (!context && !imageFile) {\n      setToastMessage('Favor de proporcionar un contexto o una imagen.');\n      return;\n    }\n\n    const formData = new FormData();\n    if (context) {\n      formData.append('context', context);\n    }\n    if (imageFile) {\n      formData.append('image', imageFile);\n    }\n\n    try {\n      const response = await fetch('/api/ai/consult', {\n        method: 'POST',\n        body: formData,\n      });\n\n      const data = await response.json();\n      console.log('AI Consultation Response:', data);\n\n      if (response.ok) {\n        sessionStorage.setItem('iaResponseData', JSON.stringify(data));\n        router.push('/ia-response');\n      } else {\n        setToastMessage(data.message || 'Hubo un error al procesar la solicitud.');\n      }\n    } catch (error) {\n      console.error('Error submitting AI consultation:', error);\n      setToastMessage('Error de red o del servidor. Por favor, inténtalo de nuevo.');\n    }\n  };\n\n  return (\n    <>\n      {toastMessage && <IAToast message={toastMessage} severity=\"error\" />}\n\n      <main className=\"ai__assistance__main\">\n        <div className=\"ai_assistance__header__container\">\n          <h1 className=\"ai_assistance__header__title\">Asesoría IA Agrícola</h1>\n          <p className=\"ai_assistance__header__description\">\n            Sube una imagen de tu cultivo y obtén recomendaciones personalizadas\n          </p>\n        </div>\n        <form id=\"ai-form\" className=\"ai__assistance__form__container\" onSubmit={handleSubmit}>\n          <div className=\"ai__assistance__form__container__left\">\n            <p className=\"ai__assistance__form__container__left__title\">\n              <Image src={CameraIcon} alt=\"Camera Icon\" width={30} height={30} />\n              Imagen del cultivo\n            </p>\n\n            {!imageFile ? (\n              <div id=\"upload-initial-state\" className=\"ai__assistance__form__container__left__container\">\n                <Image className=\"ai__assistance__form__container__left__container__img\" src={UploadIcon} alt=\"Upload Icon\" width={40} height={40} />\n                <h1 className=\"ai__assistance__form__container__left__container__title\">\n                  Sube una imagen de tu cultivo\n                </h1>\n                <p className=\"ai__assistance__form__container__left__container__description\">\n                  PNG, JPG hasta 10MB\n                </p>\n                <label htmlFor=\"image-upload\" className=\"ai__assistance__form__container__left__container__button\">\n                  Seleccionar imagen\n                </label>\n                <input\n                  id=\"image-upload\"\n                  type=\"file\"\n                  accept=\"image/*\"\n                  style={{ display: 'none' }}\n                  name=\"image\"\n                  onChange={handleFileChange}\n                  ref={fileInputRef}\n                />\n              </div>\n            ) : (\n              <div id=\"upload-finished-state\" className=\"ai__assistance__form__container__left__container\">\n                <Image className=\"ai__assistance__form__container__left__container__img\" src={ImageUploadAlreadyIcon} alt=\"Image Uploaded Icon\" width={40} height={40} />\n                <h1 id=\"file-name\" className=\"ai__assistance__form__container__left__container__title\">\n                  {imageFile.name}\n                </h1>\n                <p className=\"ai__assistance__form__container__left__container__description\">\n                  PNG, JPG hasta 10MB\n                </p>\n                <label htmlFor=\"image-upload\" className=\"ai__assistance__form__container__left__container__button\">\n                  Cambiar imagen\n                </label>\n                <input\n                  id=\"image-upload\"\n                  type=\"file\"\n                  accept=\"image/*\"\n                  style={{ display: 'none' }}\n                  name=\"image\"\n                  onChange={handleFileChange}\n                  ref={fileInputRef}\n                />\n              </div>\n            )}\n          </div>\n\n          <div className=\"ai__assistance__form__container__right\">\n            <p className=\"ai__assistance__form__container__right__title\">Contexto de la situacion</p>\n            <textarea\n              id=\"context\"\n              className=\"ai__assistance__form__container__right__input\"\n              rows={4}\n              cols={50}\n              name=\"context\"\n              placeholder=\"Describe la situacion de tu cultivo: síntomas observados, condiciones climaticas, tipo de suelo, tratamientos previos...\"\n              value={context}\n              onChange={(e) => setContext(e.target.value)}\n            ></textarea>\n            <button type=\"submit\" className=\"ai__assistance__form__container__right__button\">\n              <Image className=\"ai__assistance__form__container__right__button__img\" src={BulbIcon} alt=\"Bulb Icon\" width={20} height={20} />\n              Obtener Asesoría\n            </button>\n          </div>\n        </form>\n      </main>\n    </>\n  );\n}\n"],"names":[],"mappings":"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"}}]
}