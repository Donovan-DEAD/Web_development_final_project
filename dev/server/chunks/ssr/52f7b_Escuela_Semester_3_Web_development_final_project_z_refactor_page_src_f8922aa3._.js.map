{
  "version": 3,
  "sources": [],
  "sections": [
    {"offset": {"line": 4, "column": 0}, "map": {"version":3,"sources":["file:///C:/Users/donov/OneDrive/Escritorio/Escuela/Semester_3/Web_development_final_project/z/refactor_page/src/components/Toast.tsx"],"sourcesContent":["\"use client\";\n\nimport React, { useState, useEffect } from 'react';\nimport Snackbar from '@mui/material/Snackbar';\nimport MuiAlert, { AlertProps } from '@mui/material/Alert';\nimport IconButton from '@mui/material/IconButton';\nimport CloseIcon from '@mui/icons-material/Close';\nimport Typography from '@mui/material/Typography';\nimport Box from '@mui/material/Box';\n\ninterface ToastProps {\n  message: string | null;\n  // Optional: type of toast (e.g., 'error', 'success', 'info', 'warning')\n  severity?: 'error' | 'warning' | 'info' | 'success'; \n  duration?: number; // Duration in milliseconds, defaults to 5000\n}\n\n// Custom Alert component to match existing CSS classes if needed\nconst Alert = React.forwardRef<HTMLDivElement, AlertProps>(function Alert(\n  props,\n  ref,\n) {\n  return <MuiAlert elevation={6} ref={ref} variant=\"filled\" {...props} />;\n});\n\nconst Toast: React.FC<ToastProps> = ({ message, severity = 'error', duration = 5000 }) => {\n  const [open, setOpen] = useState(false);\n\n  useEffect(() => {\n    if (message) {\n      setOpen(true);\n    }\n  }, [message]);\n\n  const handleClose = (event?: React.SyntheticEvent | Event, reason?: string) => {\n    if (reason === 'clickaway') {\n      return;\n    }\n    setOpen(false);\n  };\n\n  if (!message) {\n    return null; // Don't render anything if there's no message\n  }\n\n  const action = (\n    <IconButton\n      size=\"small\"\n      aria-label=\"close\"\n      color=\"inherit\"\n      onClick={handleClose}\n    >\n      <CloseIcon fontSize=\"small\" />\n    </IconButton>\n  );\n\n  return (\n    <Snackbar\n      open={open}\n      autoHideDuration={duration}\n      onClose={handleClose}\n      anchorOrigin={{ vertical: 'top', horizontal: 'center' }}\n    >\n      <Alert onClose={handleClose} severity={severity} sx={{ width: '100%' }} className=\"toast-header\">\n        <Box sx={{ display: 'flex', justifyContent: 'space-between', alignItems: 'center', width: '100%' }}>\n          <Typography variant=\"body1\" sx={{ fontWeight: 'bold' }}>\n            {severity === 'error' ? 'Error' : 'Message'} {/* Default to Error or Message */}\n          </Typography>\n          {action}\n        </Box>\n        <Typography variant=\"body2\" className=\"toast-body\">\n          {message}\n        </Typography>\n      </Alert>\n    </Snackbar>\n  );\n};\n\nexport default Toast;\n"],"names":[],"mappings":";;;;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AARA;;;;;;;;;AAiBA,iEAAiE;AACjE,MAAM,sBAAQ,0TAAK,CAAC,UAAU,CAA6B,SAAS,MAClE,KAAK,EACL,GAAG;IAEH,qBAAO,wVAAC,+QAAQ;QAAC,WAAW;QAAG,KAAK;QAAK,SAAQ;QAAU,GAAG,KAAK;;;;;;AACrE;AAEA,MAAM,QAA8B,CAAC,EAAE,OAAO,EAAE,WAAW,OAAO,EAAE,WAAW,IAAI,EAAE;IACnF,MAAM,CAAC,MAAM,QAAQ,GAAG,IAAA,2TAAQ,EAAC;IAEjC,IAAA,4TAAS,EAAC;QACR,IAAI,SAAS;YACX,QAAQ;QACV;IACF,GAAG;QAAC;KAAQ;IAEZ,MAAM,cAAc,CAAC,OAAsC;QACzD,IAAI,WAAW,aAAa;YAC1B;QACF;QACA,QAAQ;IACV;IAEA,IAAI,CAAC,SAAS;QACZ,OAAO,MAAM,8CAA8C;IAC7D;IAEA,MAAM,uBACJ,wVAAC,yRAAU;QACT,MAAK;QACL,cAAW;QACX,OAAM;QACN,SAAS;kBAET,cAAA,wVAAC,+QAAS;YAAC,UAAS;;;;;;;;;;;IAIxB,qBACE,wVAAC,qRAAQ;QACP,MAAM;QACN,kBAAkB;QAClB,SAAS;QACT,cAAc;YAAE,UAAU;YAAO,YAAY;QAAS;kBAEtD,cAAA,wVAAC;YAAM,SAAS;YAAa,UAAU;YAAU,IAAI;gBAAE,OAAO;YAAO;YAAG,WAAU;;8BAChF,wVAAC,2QAAG;oBAAC,IAAI;wBAAE,SAAS;wBAAQ,gBAAgB;wBAAiB,YAAY;wBAAU,OAAO;oBAAO;;sCAC/F,wVAAC,yRAAU;4BAAC,SAAQ;4BAAQ,IAAI;gCAAE,YAAY;4BAAO;;gCAClD,aAAa,UAAU,UAAU;gCAAU;;;;;;;wBAE7C;;;;;;;8BAEH,wVAAC,yRAAU;oBAAC,SAAQ;oBAAQ,WAAU;8BACnC;;;;;;;;;;;;;;;;;AAKX;uCAEe"}},
    {"offset": {"line": 144, "column": 0}, "map": {"version":3,"sources":["file:///C:/Users/donov/OneDrive/Escritorio/Escuela/Semester_3/Web_development_final_project/z/refactor_page/src/app/login/page.tsx"],"sourcesContent":["\"use client\";\n\nimport React, { useState, useEffect } from 'react';\nimport { useRouter } from 'next/navigation';\nimport ClientNavbar from \"@/components/ClientNavbar\";\nimport Toast from \"@/components/Toast\";\n\ninterface LoginPageProps {\n  // message: string | null; // This will likely come from URL params or client-side state after redirect\n  // For initial migration, we'll simulate this with local state\n}\n\nexport default function LoginPage({}: LoginPageProps) {\n  const [email, setEmail] = useState('');\n  const [password, setPassword] = useState('');\n  const [message, setMessage] = useState<string | null>(null);\n  const router = useRouter();\n  const [user, setUser] = useState(null);\n  const [username, setUsername] = useState(null);\n\n  useEffect(() => {\n    const fetchSession = async () => {\n      const response = await fetch('/api/auth/session');\n      if (response.ok) {\n        const data = await response.json();\n        setUser(data.user);\n        setUsername(data.user?.name || null);\n      }\n    };\n    fetchSession();\n  }, []);\n\n  const handleSubmit = async (event: React.FormEvent) => {\n    event.preventDefault();\n    setMessage(null); // Clear previous messages\n\n    const response = await fetch('/api/auth/login', {\n      method: 'POST',\n      headers: {\n        'Content-Type': 'application/json',\n      },\n      body: JSON.stringify({ email, password }),\n    });\n\n    const data = await response.json();\n\n    if (response.ok) {\n      // Login successful, redirect to home page as in original EJS\n      window.location.href = '/';\n    } else {\n      // Login failed, display error message\n      setMessage(data.message || 'Login failed.');\n    }\n  };\n\n  return (\n    <>\n      <ClientNavbar username={username} currentPage=\"login\" user={user} />\n      {message && <Toast message={message} severity=\"error\" />}\n\n      <div className=\"login\">\n        <div className=\"login__container\">\n          <h1 className=\"login__title\">Iniciar Sesi칩n</h1>\n          <form className=\"login__form\" onSubmit={handleSubmit}>\n            <input\n              className=\"login__form__input\"\n              type=\"email\"\n              name=\"email\"\n              placeholder=\"Correo Electr칩nico\"\n              required\n              value={email}\n              onChange={(e) => setEmail(e.target.value)}\n            />\n            <input\n              className=\"login__form__input\"\n              type=\"password\"\n              name=\"password\"\n              placeholder=\"Contrase침a\"\n              required\n              value={password}\n              onChange={(e) => setPassword(e.target.value)}\n            />\n            <button className=\"login__form__button\" type=\"submit\">\n              Iniciar Sesi칩n\n            </button>\n          </form>\n        </div>\n      </div>\n    </>\n  );\n}\n"],"names":[],"mappings":";;;;;AAEA;AACA;AACA;AACA;AALA;;;;;;AAYe,SAAS,UAAU,EAAkB;IAClD,MAAM,CAAC,OAAO,SAAS,GAAG,IAAA,2TAAQ,EAAC;IACnC,MAAM,CAAC,UAAU,YAAY,GAAG,IAAA,2TAAQ,EAAC;IACzC,MAAM,CAAC,SAAS,WAAW,GAAG,IAAA,2TAAQ,EAAgB;IACtD,MAAM,SAAS,IAAA,yPAAS;IACxB,MAAM,CAAC,MAAM,QAAQ,GAAG,IAAA,2TAAQ,EAAC;IACjC,MAAM,CAAC,UAAU,YAAY,GAAG,IAAA,2TAAQ,EAAC;IAEzC,IAAA,4TAAS,EAAC;QACR,MAAM,eAAe;YACnB,MAAM,WAAW,MAAM,MAAM;YAC7B,IAAI,SAAS,EAAE,EAAE;gBACf,MAAM,OAAO,MAAM,SAAS,IAAI;gBAChC,QAAQ,KAAK,IAAI;gBACjB,YAAY,KAAK,IAAI,EAAE,QAAQ;YACjC;QACF;QACA;IACF,GAAG,EAAE;IAEL,MAAM,eAAe,OAAO;QAC1B,MAAM,cAAc;QACpB,WAAW,OAAO,0BAA0B;QAE5C,MAAM,WAAW,MAAM,MAAM,mBAAmB;YAC9C,QAAQ;YACR,SAAS;gBACP,gBAAgB;YAClB;YACA,MAAM,KAAK,SAAS,CAAC;gBAAE;gBAAO;YAAS;QACzC;QAEA,MAAM,OAAO,MAAM,SAAS,IAAI;QAEhC,IAAI,SAAS,EAAE,EAAE;YACf,6DAA6D;YAC7D,OAAO,QAAQ,CAAC,IAAI,GAAG;QACzB,OAAO;YACL,sCAAsC;YACtC,WAAW,KAAK,OAAO,IAAI;QAC7B;IACF;IAEA,qBACE;;0BACE,wVAAC,uPAAY;gBAAC,UAAU;gBAAU,aAAY;gBAAQ,MAAM;;;;;;YAC3D,yBAAW,wVAAC,gPAAK;gBAAC,SAAS;gBAAS,UAAS;;;;;;0BAE9C,wVAAC;gBAAI,WAAU;0BACb,cAAA,wVAAC;oBAAI,WAAU;;sCACb,wVAAC;4BAAG,WAAU;sCAAe;;;;;;sCAC7B,wVAAC;4BAAK,WAAU;4BAAc,UAAU;;8CACtC,wVAAC;oCACC,WAAU;oCACV,MAAK;oCACL,MAAK;oCACL,aAAY;oCACZ,QAAQ;oCACR,OAAO;oCACP,UAAU,CAAC,IAAM,SAAS,EAAE,MAAM,CAAC,KAAK;;;;;;8CAE1C,wVAAC;oCACC,WAAU;oCACV,MAAK;oCACL,MAAK;oCACL,aAAY;oCACZ,QAAQ;oCACR,OAAO;oCACP,UAAU,CAAC,IAAM,YAAY,EAAE,MAAM,CAAC,KAAK;;;;;;8CAE7C,wVAAC;oCAAO,WAAU;oCAAsB,MAAK;8CAAS;;;;;;;;;;;;;;;;;;;;;;;;;AAQlE"}}]
}