{
  "version": 3,
  "sources": [],
  "sections": [
    {"offset": {"line": 28, "column": 0}, "map": {"version":3,"sources":["file:///C:/Users/donov/OneDrive/Escritorio/Escuela/Semester_3/Web_development_final_project/z/refactor_page/src/components/Toast.tsx"],"sourcesContent":["\"use client\";\n\nimport React, { useState, useEffect } from 'react';\nimport Snackbar from '@mui/material/Snackbar';\nimport MuiAlert, { AlertProps } from '@mui/material/Alert';\nimport IconButton from '@mui/material/IconButton';\nimport CloseIcon from '@mui/icons-material/Close';\nimport Typography from '@mui/material/Typography';\nimport Box from '@mui/material/Box';\n\ninterface ToastProps {\n  message: string | null;\n  // Optional: type of toast (e.g., 'error', 'success', 'info', 'warning')\n  severity?: 'error' | 'warning' | 'info' | 'success'; \n  duration?: number; // Duration in milliseconds, defaults to 5000\n}\n\n// Custom Alert component to match existing CSS classes if needed\nconst Alert = React.forwardRef<HTMLDivElement, AlertProps>(function Alert(\n  props,\n  ref,\n) {\n  return <MuiAlert elevation={6} ref={ref} variant=\"filled\" {...props} />;\n});\n\nconst Toast: React.FC<ToastProps> = ({ message, severity = 'error', duration = 5000 }) => {\n  const [open, setOpen] = useState(false);\n\n  useEffect(() => {\n    if (message) {\n      setOpen(true);\n    }\n  }, [message]);\n\n  const handleClose = (event?: React.SyntheticEvent | Event, reason?: string) => {\n    if (reason === 'clickaway') {\n      return;\n    }\n    setOpen(false);\n  };\n\n  if (!message) {\n    return null; // Don't render anything if there's no message\n  }\n\n  const action = (\n    <IconButton\n      size=\"small\"\n      aria-label=\"close\"\n      color=\"inherit\"\n      onClick={handleClose}\n    >\n      <CloseIcon fontSize=\"small\" />\n    </IconButton>\n  );\n\n  return (\n    <Snackbar\n      open={open}\n      autoHideDuration={duration}\n      onClose={handleClose}\n      anchorOrigin={{ vertical: 'top', horizontal: 'center' }}\n    >\n      <Alert onClose={handleClose} severity={severity} sx={{ width: '100%' }} className=\"toast-header\">\n        <Box sx={{ display: 'flex', justifyContent: 'space-between', alignItems: 'center', width: '100%' }}>\n          <Typography variant=\"body1\" sx={{ fontWeight: 'bold' }}>\n            {severity === 'error' ? 'Error' : 'Message'} {/* Default to Error or Message */}\n          </Typography>\n          {action}\n        </Box>\n        <Typography variant=\"body2\" className=\"toast-body\">\n          {message}\n        </Typography>\n      </Alert>\n    </Snackbar>\n  );\n};\n\nexport default Toast;\n"],"names":[],"mappings":";;;;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AARA;;;;;;;;;AAiBA,iEAAiE;AACjE,MAAM,sBAAQ,0TAAK,CAAC,UAAU,CAA6B,SAAS,MAClE,KAAK,EACL,GAAG;IAEH,qBAAO,wVAAC,+QAAQ;QAAC,WAAW;QAAG,KAAK;QAAK,SAAQ;QAAU,GAAG,KAAK;;;;;;AACrE;AAEA,MAAM,QAA8B,CAAC,EAAE,OAAO,EAAE,WAAW,OAAO,EAAE,WAAW,IAAI,EAAE;IACnF,MAAM,CAAC,MAAM,QAAQ,GAAG,IAAA,2TAAQ,EAAC;IAEjC,IAAA,4TAAS,EAAC;QACR,IAAI,SAAS;YACX,QAAQ;QACV;IACF,GAAG;QAAC;KAAQ;IAEZ,MAAM,cAAc,CAAC,OAAsC;QACzD,IAAI,WAAW,aAAa;YAC1B;QACF;QACA,QAAQ;IACV;IAEA,IAAI,CAAC,SAAS;QACZ,OAAO,MAAM,8CAA8C;IAC7D;IAEA,MAAM,uBACJ,wVAAC,yRAAU;QACT,MAAK;QACL,cAAW;QACX,OAAM;QACN,SAAS;kBAET,cAAA,wVAAC,+QAAS;YAAC,UAAS;;;;;;;;;;;IAIxB,qBACE,wVAAC,qRAAQ;QACP,MAAM;QACN,kBAAkB;QAClB,SAAS;QACT,cAAc;YAAE,UAAU;YAAO,YAAY;QAAS;kBAEtD,cAAA,wVAAC;YAAM,SAAS;YAAa,UAAU;YAAU,IAAI;gBAAE,OAAO;YAAO;YAAG,WAAU;;8BAChF,wVAAC,2QAAG;oBAAC,IAAI;wBAAE,SAAS;wBAAQ,gBAAgB;wBAAiB,YAAY;wBAAU,OAAO;oBAAO;;sCAC/F,wVAAC,yRAAU;4BAAC,SAAQ;4BAAQ,IAAI;gCAAE,YAAY;4BAAO;;gCAClD,aAAa,UAAU,UAAU;gCAAU;;;;;;;wBAE7C;;;;;;;8BAEH,wVAAC,yRAAU;oBAAC,SAAQ;oBAAQ,WAAU;8BACnC;;;;;;;;;;;;;;;;;AAKX;uCAEe"}},
    {"offset": {"line": 168, "column": 0}, "map": {"version":3,"sources":["file:///C:/Users/donov/OneDrive/Escritorio/Escuela/Semester_3/Web_development_final_project/z/refactor_page/src/components/editable-blog-blocks/EditableHeaderBlock.tsx"],"sourcesContent":["\"use client\";\n\nimport React, { useState, useImperativeHandle, forwardRef } from 'react';\n\nexport interface HeaderBlockData {\n  blog_title: string;\n  blog_subtitle: string;\n  blog_author: string;\n  blog_date: string;\n}\n\nexport interface EditableHeaderBlockRef {\n  getData: () => HeaderBlockData;\n}\n\nconst EditableHeaderBlock = forwardRef<EditableHeaderBlockRef>((props, ref) => {\n  const [blog_title, setBlog_title] = useState('');\n  const [blog_subtitle, setBlog_subtitle] = useState('');\n  const [blog_author, setBlog_author] = useState('');\n  const [blog_date, setBlog_date] = useState('');\n\n  useImperativeHandle(ref, () => ({\n    getData: () => ({\n      blog_title,\n      blog_subtitle,\n      blog_author,\n      blog_date,\n    }),\n  }), [blog_title, blog_subtitle, blog_author, blog_date]);\n\n  return (\n    <div className=\"blog-header p-4 border rounded-lg shadow-sm mb-6 bg-white\">\n      <h2 className=\"text-2xl font-bold mb-4\">Blog Header</h2>\n      <div className=\"mb-4\">\n        <label htmlFor=\"blogTitle\" className=\"block text-sm font-medium text-gray-700\">Title</label>\n        <input\n          id=\"blogTitle\"\n          type=\"text\"\n          placeholder=\"Blog Title\"\n          value={blog_title}\n          onChange={(e) => setBlog_title(e.target.value)}\n          className=\"mt-1 block w-full px-3 py-2 border border-gray-300 rounded-md shadow-sm focus:outline-none focus:ring-indigo-500 focus:border-indigo-500 sm:text-sm\"\n        />\n      </div>\n      <div className=\"mb-4\">\n        <label htmlFor=\"blogSubtitle\" className=\"block text-sm font-medium text-gray-700\">Subtitle</label>\n        <input\n          id=\"blogSubtitle\"\n          type=\"text\"\n          placeholder=\"Blog Subtitle\"\n          value={blog_subtitle}\n          onChange={(e) => setBlog_subtitle(e.target.value)}\n          className=\"mt-1 block w-full px-3 py-2 border border-gray-300 rounded-md shadow-sm focus:outline-none focus:ring-indigo-500 focus:border-indigo-500 sm:text-sm\"\n        />\n      </div>\n      <div className=\"mb-4\">\n        <label htmlFor=\"blogAuthor\" className=\"block text-sm font-medium text-gray-700\">Author</label>\n        <input\n          id=\"blogAuthor\"\n          type=\"text\"\n          placeholder=\"Author Name\"\n          value={blog_author}\n          onChange={(e) => setBlog_author(e.target.value)}\n          className=\"mt-1 block w-full px-3 py-2 border border-gray-300 rounded-md shadow-sm focus:outline-none focus:ring-indigo-500 focus:border-indigo-500 sm:text-sm\"\n        />\n      </div>\n      <div className=\"mb-4\">\n        <label htmlFor=\"blogDate\" className=\"block text-sm font-medium text-gray-700\">Publication Date</label>\n        <input\n          id=\"blogDate\"\n          type=\"date\"\n          value={blog_date}\n          onChange={(e) => setBlog_date(e.target.value)}\n          className=\"mt-1 block w-full px-3 py-2 border border-gray-300 rounded-md shadow-sm focus:outline-none focus:ring-indigo-500 focus:border-indigo-500 sm:text-sm\"\n        />\n      </div>\n    </div>\n  );\n});\n\nEditableHeaderBlock.displayName = 'EditableHeaderBlock';\n\nexport default EditableHeaderBlock;\n"],"names":[],"mappings":";;;;;AAEA;AAFA;;;AAeA,MAAM,oCAAsB,IAAA,6TAAU,EAAyB,CAAC,OAAO;IACrE,MAAM,CAAC,YAAY,cAAc,GAAG,IAAA,2TAAQ,EAAC;IAC7C,MAAM,CAAC,eAAe,iBAAiB,GAAG,IAAA,2TAAQ,EAAC;IACnD,MAAM,CAAC,aAAa,eAAe,GAAG,IAAA,2TAAQ,EAAC;IAC/C,MAAM,CAAC,WAAW,aAAa,GAAG,IAAA,2TAAQ,EAAC;IAE3C,IAAA,sUAAmB,EAAC,KAAK,IAAM,CAAC;YAC9B,SAAS,IAAM,CAAC;oBACd;oBACA;oBACA;oBACA;gBACF,CAAC;QACH,CAAC,GAAG;QAAC;QAAY;QAAe;QAAa;KAAU;IAEvD,qBACE,wVAAC;QAAI,WAAU;;0BACb,wVAAC;gBAAG,WAAU;0BAA0B;;;;;;0BACxC,wVAAC;gBAAI,WAAU;;kCACb,wVAAC;wBAAM,SAAQ;wBAAY,WAAU;kCAA0C;;;;;;kCAC/E,wVAAC;wBACC,IAAG;wBACH,MAAK;wBACL,aAAY;wBACZ,OAAO;wBACP,UAAU,CAAC,IAAM,cAAc,EAAE,MAAM,CAAC,KAAK;wBAC7C,WAAU;;;;;;;;;;;;0BAGd,wVAAC;gBAAI,WAAU;;kCACb,wVAAC;wBAAM,SAAQ;wBAAe,WAAU;kCAA0C;;;;;;kCAClF,wVAAC;wBACC,IAAG;wBACH,MAAK;wBACL,aAAY;wBACZ,OAAO;wBACP,UAAU,CAAC,IAAM,iBAAiB,EAAE,MAAM,CAAC,KAAK;wBAChD,WAAU;;;;;;;;;;;;0BAGd,wVAAC;gBAAI,WAAU;;kCACb,wVAAC;wBAAM,SAAQ;wBAAa,WAAU;kCAA0C;;;;;;kCAChF,wVAAC;wBACC,IAAG;wBACH,MAAK;wBACL,aAAY;wBACZ,OAAO;wBACP,UAAU,CAAC,IAAM,eAAe,EAAE,MAAM,CAAC,KAAK;wBAC9C,WAAU;;;;;;;;;;;;0BAGd,wVAAC;gBAAI,WAAU;;kCACb,wVAAC;wBAAM,SAAQ;wBAAW,WAAU;kCAA0C;;;;;;kCAC9E,wVAAC;wBACC,IAAG;wBACH,MAAK;wBACL,OAAO;wBACP,UAAU,CAAC,IAAM,aAAa,EAAE,MAAM,CAAC,KAAK;wBAC5C,WAAU;;;;;;;;;;;;;;;;;;AAKpB;AAEA,oBAAoB,WAAW,GAAG;uCAEnB"}},
    {"offset": {"line": 338, "column": 0}, "map": {"version":3,"sources":["file:///C:/Users/donov/OneDrive/Escritorio/Escuela/Semester_3/Web_development_final_project/z/refactor_page/src/components/editable-blog-blocks/EditablePureContentBlock.tsx"],"sourcesContent":["\"use client\";\n\nimport React, { useState, useImperativeHandle, forwardRef } from 'react';\n\nexport interface PureContentBlockData {\n  blog_paragraphs: string[];\n}\n\nexport interface EditablePureContentBlockRef {\n  getData: () => PureContentBlockData;\n  addParagraph: () => void;\n  removeParagraph: (index: number) => void;\n  updateParagraph: (index: number, value: string) => void;\n}\n\nconst EditablePureContentBlock = forwardRef<EditablePureContentBlockRef>((props, ref) => {\n  const [blog_paragraphs, setBlog_paragraphs] = useState<string[]>(['']);\n\n  useImperativeHandle(ref, () => ({\n    getData: () => ({\n      blog_paragraphs: blog_paragraphs.filter(p => p.trim() !== ''), // Filter out empty paragraphs\n    }),\n    addParagraph,\n    removeParagraph,\n    updateParagraph,\n  }), [blog_paragraphs]);\n\n  const addParagraph = () => {\n    setBlog_paragraphs([...blog_paragraphs, '']);\n  }\n\n  const removeParagraph = (index: number) => {\n    setBlog_paragraphs(blog_paragraphs.filter((_, i) => i !== index));\n  }\n\n  const updateParagraph = (index: number, value: string) => {\n    const newParagraphs = [...blog_paragraphs];\n    newParagraphs[index] = value;\n    setBlog_paragraphs(newParagraphs);\n  }\n\n  return (\n    <div className=\"pure-content-editor p-4 border rounded-lg shadow-sm mb-6 bg-white\">\n      <h2 className=\"text-2xl font-bold mb-4\">Content Paragraphs</h2>\n      {blog_paragraphs.map((paragraph, index) => (\n        <div key={index} className=\"mb-4 flex items-center\">\n          <textarea\n            placeholder={`Paragraph ${index + 1}`}\n            value={paragraph}\n            onChange={(e) => updateParagraph(index, e.target.value)}\n            rows={4}\n            className=\"mt-1 block w-full px-3 py-2 border border-gray-300 rounded-md shadow-sm focus:outline-none focus:ring-indigo-500 focus:border-indigo-500 sm:text-sm resize-y\"\n          />\n          <button\n            type=\"button\"\n            onClick={() => removeParagraph(index)}\n            className=\"ml-2 p-2 text-red-600 hover:text-red-800\"\n            disabled={blog_paragraphs.length === 1 && index === 0} // Disable remove if only one paragraph\n          >\n            &times;\n          </button>\n        </div>\n      ))}\n      <button\n        type=\"button\"\n        onClick={addParagraph}\n        className=\"mt-2 px-4 py-2 bg-blue-600 text-white rounded-md hover:bg-blue-700 focus:outline-none focus:ring-2 focus:ring-blue-500 focus:ring-offset-2\"\n      >\n        Add Paragraph\n      </button>\n    </div>\n  );\n});\n\nEditablePureContentBlock.displayName = 'EditablePureContentBlock';\n\nexport default EditablePureContentBlock;\n"],"names":[],"mappings":";;;;;AAEA;AAFA;;;AAeA,MAAM,yCAA2B,IAAA,6TAAU,EAA8B,CAAC,OAAO;IAC/E,MAAM,CAAC,iBAAiB,mBAAmB,GAAG,IAAA,2TAAQ,EAAW;QAAC;KAAG;IAErE,IAAA,sUAAmB,EAAC,KAAK,IAAM,CAAC;YAC9B,SAAS,IAAM,CAAC;oBACd,iBAAiB,gBAAgB,MAAM,CAAC,CAAA,IAAK,EAAE,IAAI,OAAO;gBAC5D,CAAC;YACD;YACA;YACA;QACF,CAAC,GAAG;QAAC;KAAgB;IAErB,MAAM,eAAe;QACnB,mBAAmB;eAAI;YAAiB;SAAG;IAC7C;IAEA,MAAM,kBAAkB,CAAC;QACvB,mBAAmB,gBAAgB,MAAM,CAAC,CAAC,GAAG,IAAM,MAAM;IAC5D;IAEA,MAAM,kBAAkB,CAAC,OAAe;QACtC,MAAM,gBAAgB;eAAI;SAAgB;QAC1C,aAAa,CAAC,MAAM,GAAG;QACvB,mBAAmB;IACrB;IAEA,qBACE,wVAAC;QAAI,WAAU;;0BACb,wVAAC;gBAAG,WAAU;0BAA0B;;;;;;YACvC,gBAAgB,GAAG,CAAC,CAAC,WAAW,sBAC/B,wVAAC;oBAAgB,WAAU;;sCACzB,wVAAC;4BACC,aAAa,CAAC,UAAU,EAAE,QAAQ,GAAG;4BACrC,OAAO;4BACP,UAAU,CAAC,IAAM,gBAAgB,OAAO,EAAE,MAAM,CAAC,KAAK;4BACtD,MAAM;4BACN,WAAU;;;;;;sCAEZ,wVAAC;4BACC,MAAK;4BACL,SAAS,IAAM,gBAAgB;4BAC/B,WAAU;4BACV,UAAU,gBAAgB,MAAM,KAAK,KAAK,UAAU;sCACrD;;;;;;;mBAbO;;;;;0BAkBZ,wVAAC;gBACC,MAAK;gBACL,SAAS;gBACT,WAAU;0BACX;;;;;;;;;;;;AAKP;AAEA,yBAAyB,WAAW,GAAG;uCAExB"}},
    {"offset": {"line": 442, "column": 0}, "map": {"version":3,"sources":["file:///C:/Users/donov/OneDrive/Escritorio/Escuela/Semester_3/Web_development_final_project/z/refactor_page/src/components/editable-blog-blocks/EditablePureImageBlock.tsx"],"sourcesContent":["import React, { useState, useImperativeHandle, forwardRef, useRef } from 'react';\nimport Image from 'next/image';\n\nexport interface PureImageBlockData {\n  img_url: string;\n  img_footer: string;\n}\n\nexport interface EditablePureImageBlockRef {\n  getData: () => PureImageBlockData;\n}\n\ninterface EditablePureImageBlockProps {\n  uploadImage: (file: File) => Promise<string | null>;\n  setToastMessage: (message: string | null) => void;\n}\n\nconst EditablePureImageBlock = forwardRef<EditablePureImageBlockRef, EditablePureImageBlockProps>(({ uploadImage, setToastMessage }, ref) => {\n  const [img_url, setImg_url] = useState('');\n  const [img_footer, setImg_footer] = useState('');\n  const [loading, setLoading] = useState(false);\n  const fileInputRef = useRef<HTMLInputElement>(null);\n\n  useImperativeHandle(ref, () => ({\n    getData: () => ({\n      img_url,\n      img_footer,\n    }),\n  }), [img_url, img_footer]);\n\n  const handleImageFileChange = async (event: React.ChangeEvent<HTMLInputElement>) => {\n    if (event.target.files && event.target.files[0]) {\n      const file = event.target.files[0];\n      setLoading(true);\n      setToastMessage('Subiendo imagen...');\n      const imageUrl = await uploadImage(file);\n      setLoading(false);\n\n      if (imageUrl) {\n        setImg_url(imageUrl);\n        setToastMessage('Imagen subida exitosamente!');\n      } else {\n        setToastMessage('Error al subir la imagen.');\n        // Clear the file input if upload failed\n        if (fileInputRef.current) {\n          fileInputRef.current.value = '';\n        }\n      }\n    }\n  };\n\n  const handleDeleteImage = () => {\n    setImg_url('');\n    if (fileInputRef.current) {\n      fileInputRef.current.value = '';\n    }\n  };\n\n  return (\n    <div className=\"pure-image-editor p-4 border rounded-lg shadow-sm mb-6 bg-white\">\n      <h2 className=\"text-2xl font-bold mb-4\">Image Block</h2>\n      <div className=\"mb-4\">\n        <label htmlFor=\"image-upload-block\" className=\"block text-sm font-medium text-gray-700\">Subir Imagen</label>\n        <input\n          id=\"image-upload-block\"\n          type=\"file\"\n          accept=\"image/*\"\n          onChange={handleImageFileChange}\n          ref={fileInputRef}\n          className=\"mt-1 block w-full text-sm text-gray-500 file:mr-4 file:py-2 file:px-4 file:rounded-full file:border-0 file:text-sm file:font-semibold file:bg-blue-50 file:text-blue-700 hover:file:bg-blue-100\"\n          disabled={loading}\n        />\n        {loading && <p className=\"text-blue-500 mt-2\">Subiendo...</p>}\n      </div>\n      \n      {img_url && (\n        <div className=\"mb-4\">\n          <label htmlFor=\"imageUrl\" className=\"block text-sm font-medium text-gray-700\">Image URL (Generada)</label>\n          <input\n            id=\"imageUrl\"\n            type=\"text\"\n            value={img_url}\n            readOnly\n            className=\"mt-1 block w-full px-3 py-2 border border-gray-300 rounded-md shadow-sm bg-gray-50 focus:outline-none focus:ring-indigo-500 focus:border-indigo-500 sm:text-sm\"\n          />\n          <button type=\"button\" onClick={handleDeleteImage} className=\"mt-2 px-3 py-1 bg-red-500 text-white rounded-md hover:bg-red-600 focus:outline-none focus:ring-2 focus:ring-red-500 focus:ring-offset-2\">\n            Eliminar Imagen\n          </button>\n        </div>\n      )}\n\n      <div className=\"mb-4\">\n        <label htmlFor=\"imageFooter\" className=\"block text-sm font-medium text-gray-700\">Image Footer (Alt Text / Caption)</label>\n        <input\n          id=\"imageFooter\"\n          type=\"text\"\n          placeholder=\"Caption for the image\"\n          value={img_footer}\n          onChange={(e) => setImg_footer(e.target.value)}\n          className=\"mt-1 block w-full px-3 py-2 border border-gray-300 rounded-md shadow-sm focus:outline-none focus:ring-indigo-500 focus:border-indigo-500 sm:text-sm\"\n        />\n      </div>\n      {img_url && (\n        <div className=\"mt-4\">\n          <p className=\"block text-sm font-medium text-gray-700 mb-2\">Image Preview:</p>\n          <Image src={img_url} alt={img_footer || \"Image Preview\"} width={500} height={300} layout=\"responsive\" objectFit=\"contain\" className=\"rounded-md\" />\n        </div>\n      )}\n    </div>\n  );\n});\n\nEditablePureImageBlock.displayName = 'EditablePureImageBlock';\n\nexport default EditablePureImageBlock;\n"],"names":[],"mappings":";;;;;AAAA;AACA;;;;AAgBA,MAAM,uCAAyB,IAAA,6TAAU,EAAyD,CAAC,EAAE,WAAW,EAAE,eAAe,EAAE,EAAE;IACnI,MAAM,CAAC,SAAS,WAAW,GAAG,IAAA,2TAAQ,EAAC;IACvC,MAAM,CAAC,YAAY,cAAc,GAAG,IAAA,2TAAQ,EAAC;IAC7C,MAAM,CAAC,SAAS,WAAW,GAAG,IAAA,2TAAQ,EAAC;IACvC,MAAM,eAAe,IAAA,yTAAM,EAAmB;IAE9C,IAAA,sUAAmB,EAAC,KAAK,IAAM,CAAC;YAC9B,SAAS,IAAM,CAAC;oBACd;oBACA;gBACF,CAAC;QACH,CAAC,GAAG;QAAC;QAAS;KAAW;IAEzB,MAAM,wBAAwB,OAAO;QACnC,IAAI,MAAM,MAAM,CAAC,KAAK,IAAI,MAAM,MAAM,CAAC,KAAK,CAAC,EAAE,EAAE;YAC/C,MAAM,OAAO,MAAM,MAAM,CAAC,KAAK,CAAC,EAAE;YAClC,WAAW;YACX,gBAAgB;YAChB,MAAM,WAAW,MAAM,YAAY;YACnC,WAAW;YAEX,IAAI,UAAU;gBACZ,WAAW;gBACX,gBAAgB;YAClB,OAAO;gBACL,gBAAgB;gBAChB,wCAAwC;gBACxC,IAAI,aAAa,OAAO,EAAE;oBACxB,aAAa,OAAO,CAAC,KAAK,GAAG;gBAC/B;YACF;QACF;IACF;IAEA,MAAM,oBAAoB;QACxB,WAAW;QACX,IAAI,aAAa,OAAO,EAAE;YACxB,aAAa,OAAO,CAAC,KAAK,GAAG;QAC/B;IACF;IAEA,qBACE,wVAAC;QAAI,WAAU;;0BACb,wVAAC;gBAAG,WAAU;0BAA0B;;;;;;0BACxC,wVAAC;gBAAI,WAAU;;kCACb,wVAAC;wBAAM,SAAQ;wBAAqB,WAAU;kCAA0C;;;;;;kCACxF,wVAAC;wBACC,IAAG;wBACH,MAAK;wBACL,QAAO;wBACP,UAAU;wBACV,KAAK;wBACL,WAAU;wBACV,UAAU;;;;;;oBAEX,yBAAW,wVAAC;wBAAE,WAAU;kCAAqB;;;;;;;;;;;;YAG/C,yBACC,wVAAC;gBAAI,WAAU;;kCACb,wVAAC;wBAAM,SAAQ;wBAAW,WAAU;kCAA0C;;;;;;kCAC9E,wVAAC;wBACC,IAAG;wBACH,MAAK;wBACL,OAAO;wBACP,QAAQ;wBACR,WAAU;;;;;;kCAEZ,wVAAC;wBAAO,MAAK;wBAAS,SAAS;wBAAmB,WAAU;kCAA0I;;;;;;;;;;;;0BAM1M,wVAAC;gBAAI,WAAU;;kCACb,wVAAC;wBAAM,SAAQ;wBAAc,WAAU;kCAA0C;;;;;;kCACjF,wVAAC;wBACC,IAAG;wBACH,MAAK;wBACL,aAAY;wBACZ,OAAO;wBACP,UAAU,CAAC,IAAM,cAAc,EAAE,MAAM,CAAC,KAAK;wBAC7C,WAAU;;;;;;;;;;;;YAGb,yBACC,wVAAC;gBAAI,WAAU;;kCACb,wVAAC;wBAAE,WAAU;kCAA+C;;;;;;kCAC5D,wVAAC,kPAAK;wBAAC,KAAK;wBAAS,KAAK,cAAc;wBAAiB,OAAO;wBAAK,QAAQ;wBAAK,QAAO;wBAAa,WAAU;wBAAU,WAAU;;;;;;;;;;;;;;;;;;AAK9I;AAEA,uBAAuB,WAAW,GAAG;uCAEtB"}},
    {"offset": {"line": 653, "column": 0}, "map": {"version":3,"sources":["file:///C:/Users/donov/OneDrive/Escritorio/Escuela/Semester_3/Web_development_final_project/z/refactor_page/src/components/editable-blog-blocks/EditableImgAndContentBlock.tsx"],"sourcesContent":["import React, { useState, useImperativeHandle, forwardRef, useRef } from 'react';\nimport Image from 'next/image';\n\nexport interface ImgAndContentBlockData {\n  img_url: string;\n  img_footer: string;\n  blog_paragraphs: string[];\n  orientation: 'left' | 'right';\n}\n\nexport interface EditableImgAndContentBlockRef {\n  getData: () => ImgAndContentBlockData;\n  addParagraph: () => void;\n  removeParagraph: (index: number) => void;\n  updateParagraph: (index: number, value: string) => void;\n}\n\ninterface EditableImgAndContentBlockProps {\n  uploadImage: (file: File) => Promise<string | null>;\n  setToastMessage: (message: string | null) => void;\n}\n\nconst EditableImgAndContentBlock = forwardRef<EditableImgAndContentBlockRef, EditableImgAndContentBlockProps>(({ uploadImage, setToastMessage }, ref) => {\n  const [img_url, setImg_url] = useState('');\n  const [img_footer, setImg_footer] = useState('');\n  const [blog_paragraphs, setBlog_paragraphs] = useState<string[]>(['']);\n  const [orientation, setOrientation] = useState<'left' | 'right'>('left');\n  const [loading, setLoading] = useState(false);\n  const fileInputRef = useRef<HTMLInputElement>(null);\n\n  useImperativeHandle(ref, () => ({\n    getData: () => ({\n      img_url,\n      img_footer,\n      blog_paragraphs: blog_paragraphs.filter(p => p.trim() !== ''),\n      orientation,\n    }),\n    addParagraph,\n    removeParagraph,\n    updateParagraph,\n  }), [img_url, img_footer, blog_paragraphs, orientation]);\n\n  const addParagraph = () => {\n      setBlog_paragraphs([...blog_paragraphs, '']);\n  }\n  \n  const removeParagraph = (index: number) => {\n      setBlog_paragraphs(blog_paragraphs.filter((_, i) => i !== index));\n  }\n\n  const updateParagraph = (index: number, value: string) => {\n      const newParagraphs = [...blog_paragraphs];\n      newParagraphs[index] = value;\n      setBlog_paragraphs(newParagraphs);\n  }\n\n  const handleImageFileChange = async (event: React.ChangeEvent<HTMLInputElement>) => {\n    if (event.target.files && event.target.files[0]) {\n      const file = event.target.files[0];\n      setLoading(true);\n      setToastMessage('Subiendo imagen...');\n      const imageUrl = await uploadImage(file);\n      setLoading(false);\n\n      if (imageUrl) {\n        setImg_url(imageUrl);\n        setToastMessage('Imagen subida exitosamente!');\n      } else {\n        setToastMessage('Error al subir la imagen.');\n        if (fileInputRef.current) {\n          fileInputRef.current.value = '';\n        }\n      }\n    }\n  };\n\n  const handleDeleteImage = () => {\n    setImg_url('');\n    if (fileInputRef.current) {\n      fileInputRef.current.value = '';\n    }\n  };\n\n  return (\n    <div className=\"img-and-content-editor p-4 border rounded-lg shadow-sm mb-6 bg-white\">\n      <h2 className=\"text-2xl font-bold mb-4\">Image and Content Block</h2>\n      <div className=\"mb-4\">\n        <label htmlFor=\"image-upload-block-combined\" className=\"block text-sm font-medium text-gray-700\">Subir Imagen</label>\n        <input\n          id=\"image-upload-block-combined\"\n          type=\"file\"\n          accept=\"image/*\"\n          onChange={handleImageFileChange}\n          ref={fileInputRef}\n          className=\"mt-1 block w-full text-sm text-gray-500 file:mr-4 file:py-2 file:px-4 file:rounded-full file:border-0 file:text-sm file:font-semibold file:bg-blue-50 file:text-blue-700 hover:file:bg-blue-100\"\n          disabled={loading}\n        />\n        {loading && <p className=\"text-blue-500 mt-2\">Subiendo...</p>}\n      </div>\n\n      {img_url && (\n        <div className=\"mb-4\">\n          <label htmlFor=\"imageUrl\" className=\"block text-sm font-medium text-gray-700\">Image URL (Generada)</label>\n          <input\n            id=\"imageUrl\"\n            type=\"text\"\n            value={img_url}\n            readOnly\n            className=\"mt-1 block w-full px-3 py-2 border border-gray-300 rounded-md shadow-sm bg-gray-50 focus:outline-none focus:ring-indigo-500 focus:border-indigo-500 sm:text-sm\"\n          />\n          <button type=\"button\" onClick={handleDeleteImage} className=\"mt-2 px-3 py-1 bg-red-500 text-white rounded-md hover:bg-red-600 focus:outline-none focus:ring-2 focus:ring-red-500 focus:ring-offset-2\">\n            Eliminar Imagen\n          </button>\n        </div>\n      )}\n\n      <div className=\"mb-4\">\n        <label htmlFor=\"imageFooter\" className=\"block text-sm font-medium text-gray-700\">Image Footer (Alt Text / Caption)</label>\n        <input\n          id=\"imageFooter\"\n          type=\"text\"\n          placeholder=\"Caption for the image\"\n          value={img_footer}\n          onChange={(e) => setImg_footer(e.target.value)}\n          className=\"mt-1 block w-full px-3 py-2 border border-gray-300 rounded-md shadow-sm focus:outline-none focus:ring-indigo-500 focus:border-indigo-500 sm:text-sm\"\n        />\n      </div>\n      {img_url && (\n        <div className=\"mt-4 mb-4\">\n          <p className=\"block text-sm font-medium text-gray-700 mb-2\">Image Preview:</p>\n          <Image src={img_url} alt={img_footer || \"Image Preview\"} width={500} height={300} layout=\"responsive\" objectFit=\"contain\" className=\"rounded-md\" />\n        </div>\n      )}\n      <div className=\"mb-4\">\n        <label htmlFor=\"orientation\" className=\"block text-sm font-medium text-gray-700\">Image Orientation</label>\n        <select\n          id=\"orientation\"\n          value={orientation}\n          onChange={(e) => setOrientation(e.target.value as 'left' | 'right')}\n          className=\"mt-1 block w-full pl-3 pr-10 py-2 text-base border-gray-300 focus:outline-none focus:ring-indigo-500 focus:border-indigo-500 sm:text-sm rounded-md\"\n        >\n          <option value=\"left\">Left</option>\n          <option value=\"right\">Right</option>\n        </select>\n      </div>\n\n      <h3 className=\"text-xl font-bold mb-3\">Content Paragraphs</h3>\n      {blog_paragraphs.map((paragraph, index) => (\n        <div key={index} className=\"mb-4 flex items-center\">\n          <textarea\n            placeholder={`Paragraph ${index + 1}`}\n            value={paragraph}\n            onChange={(e) => updateParagraph(index, e.target.value)}\n            rows={4}\n            className=\"mt-1 block w-full px-3 py-2 border border-gray-300 rounded-md shadow-sm focus:outline-none focus:ring-indigo-500 focus:border-indigo-500 sm:text-sm resize-y\"\n          />\n          <button\n            type=\"button\"\n            onClick={() => removeParagraph(index)}\n            className=\"ml-2 p-2 text-red-600 hover:text-red-800\"\n            disabled={blog_paragraphs.length === 1 && index === 0}\n          >\n            &times;\n          </button>\n        </div>\n      ))}\n      <button\n        type=\"button\"\n        onClick={addParagraph}\n        className=\"mt-2 px-4 py-2 bg-blue-600 text-white rounded-md hover:bg-blue-700 focus:outline-none focus:ring-2 focus:ring-blue-500 focus:ring-offset-2\"\n      >\n        Add Paragraph\n      </button>\n    </div>\n  );\n});\n\nEditableImgAndContentBlock.displayName = 'EditableImgAndContentBlock';\n\nexport default EditableImgAndContentBlock;\n"],"names":[],"mappings":"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"}},
    {"offset": {"line": 985, "column": 0}, "map": {"version":3,"sources":["file:///C:/Users/donov/OneDrive/Escritorio/Escuela/Semester_3/Web_development_final_project/z/refactor_page/src/components/editable-blog-blocks/EditableReferencesBlock.tsx"],"sourcesContent":["\"use client\";\n\nimport React, { useState, useImperativeHandle, forwardRef } from 'react';\n\nexport interface ReferenceData {\n  blog_reference_apa: string;\n  blog_reference_url: string;\n}\n\nexport interface ReferencesBlockData {\n  blog_references: ReferenceData[];\n}\n\nexport interface EditableReferencesBlockRef {\n  getData: () => ReferencesBlockData;\n  addReference: () => void;\n  removeReference: (index: number) => void;\n  updateReference: (index: number, field: keyof ReferenceData, value: string) => void;\n}\n\nconst EditableReferencesBlock = forwardRef<EditableReferencesBlockRef>((props, ref) => {\n  const [blog_references, setBlog_references] = useState<ReferenceData[]>([{ blog_reference_apa: '', blog_reference_url: '' }]);\n\n  useImperativeHandle(ref, () => ({\n    getData: () => ({\n      blog_references: blog_references.filter(ref => ref.blog_reference_apa.trim() !== '' && ref.blog_reference_url.trim() !== ''),\n    }),\n    addReference,\n    removeReference,\n    updateReference,\n  }), [blog_references]);\n\n  const addReference = () => {\n    setBlog_references([...blog_references, { blog_reference_apa: '', blog_reference_url: '' }]);\n  }\n\n  const removeReference = (index: number) => {\n    setBlog_references(blog_references.filter((_, i) => i !== index));\n  }\n\n  const updateReference =  (index: number, field: keyof ReferenceData, value: string) => {\n    const newReferences = [...blog_references];\n    newReferences[index] = { ...newReferences[index], [field]: value };\n    setBlog_references(newReferences);\n  }\n\n  return (\n    <div className=\"references-editor p-4 border rounded-lg shadow-sm mb-6 bg-white\">\n      <h2 className=\"text-2xl font-bold mb-4\">References</h2>\n      {blog_references.map((reference, index) => (\n        <div key={index} className=\"mb-4 p-3 border rounded-md bg-gray-50\">\n          <h3 className=\"text-lg font-semibold mb-2\">Reference {index + 1}</h3>\n          <div className=\"mb-2\">\n            <label htmlFor={`apa-${index}`} className=\"block text-sm font-medium text-gray-700\">APA Format</label>\n            <input\n              id={`apa-${index}`}\n              type=\"text\"\n              placeholder=\"e.g., Author, A. A. (Year). Title of work.\"\n              value={reference.blog_reference_apa}\n              onChange={(e) => updateReference(index, 'blog_reference_apa', e.target.value)}\n              className=\"mt-1 block w-full px-3 py-2 border border-gray-300 rounded-md shadow-sm focus:outline-none focus:ring-indigo-500 focus:border-indigo-500 sm:text-sm\"\n            />\n          </div>\n          <div className=\"mb-2\">\n            <label htmlFor={`url-${index}`} className=\"block text-sm font-medium text-gray-700\">URL</label>\n            <input\n              id={`url-${index}`}\n              type=\"url\"\n              placeholder=\"e.g., https://example.com/reference\"\n              value={reference.blog_reference_url}\n              onChange={(e) => updateReference(index, 'blog_reference_url', e.target.value)}\n              className=\"mt-1 block w-full px-3 py-2 border border-gray-300 rounded-md shadow-sm focus:outline-none focus:ring-indigo-500 focus:border-indigo-500 sm:text-sm\"\n            />\n          </div>\n          <button\n            type=\"button\"\n            onClick={() => removeReference(index)}\n            className=\"mt-2 px-3 py-1 bg-red-500 text-white rounded-md hover:bg-red-600 focus:outline-none focus:ring-2 focus:ring-red-500 focus:ring-offset-2\"\n            disabled={blog_references.length === 1 && index === 0} // Disable remove if only one reference\n          >\n            Remove Reference\n          </button>\n        </div>\n      ))}\n      <button\n        type=\"button\"\n        onClick={addReference}\n        className=\"mt-4 px-4 py-2 bg-blue-600 text-white rounded-md hover:bg-blue-700 focus:outline-none focus:ring-2 focus:ring-blue-500 focus:ring-offset-2\"\n      >\n        Add Reference\n      </button>\n    </div>\n  );\n});\n\nEditableReferencesBlock.displayName = 'EditableReferencesBlock';\n\nexport default EditableReferencesBlock;\n"],"names":[],"mappings":";;;;;AAEA;AAFA;;;AAoBA,MAAM,wCAA0B,IAAA,6TAAU,EAA6B,CAAC,OAAO;IAC7E,MAAM,CAAC,iBAAiB,mBAAmB,GAAG,IAAA,2TAAQ,EAAkB;QAAC;YAAE,oBAAoB;YAAI,oBAAoB;QAAG;KAAE;IAE5H,IAAA,sUAAmB,EAAC,KAAK,IAAM,CAAC;YAC9B,SAAS,IAAM,CAAC;oBACd,iBAAiB,gBAAgB,MAAM,CAAC,CAAA,MAAO,IAAI,kBAAkB,CAAC,IAAI,OAAO,MAAM,IAAI,kBAAkB,CAAC,IAAI,OAAO;gBAC3H,CAAC;YACD;YACA;YACA;QACF,CAAC,GAAG;QAAC;KAAgB;IAErB,MAAM,eAAe;QACnB,mBAAmB;eAAI;YAAiB;gBAAE,oBAAoB;gBAAI,oBAAoB;YAAG;SAAE;IAC7F;IAEA,MAAM,kBAAkB,CAAC;QACvB,mBAAmB,gBAAgB,MAAM,CAAC,CAAC,GAAG,IAAM,MAAM;IAC5D;IAEA,MAAM,kBAAmB,CAAC,OAAe,OAA4B;QACnE,MAAM,gBAAgB;eAAI;SAAgB;QAC1C,aAAa,CAAC,MAAM,GAAG;YAAE,GAAG,aAAa,CAAC,MAAM;YAAE,CAAC,MAAM,EAAE;QAAM;QACjE,mBAAmB;IACrB;IAEA,qBACE,wVAAC;QAAI,WAAU;;0BACb,wVAAC;gBAAG,WAAU;0BAA0B;;;;;;YACvC,gBAAgB,GAAG,CAAC,CAAC,WAAW,sBAC/B,wVAAC;oBAAgB,WAAU;;sCACzB,wVAAC;4BAAG,WAAU;;gCAA6B;gCAAW,QAAQ;;;;;;;sCAC9D,wVAAC;4BAAI,WAAU;;8CACb,wVAAC;oCAAM,SAAS,CAAC,IAAI,EAAE,OAAO;oCAAE,WAAU;8CAA0C;;;;;;8CACpF,wVAAC;oCACC,IAAI,CAAC,IAAI,EAAE,OAAO;oCAClB,MAAK;oCACL,aAAY;oCACZ,OAAO,UAAU,kBAAkB;oCACnC,UAAU,CAAC,IAAM,gBAAgB,OAAO,sBAAsB,EAAE,MAAM,CAAC,KAAK;oCAC5E,WAAU;;;;;;;;;;;;sCAGd,wVAAC;4BAAI,WAAU;;8CACb,wVAAC;oCAAM,SAAS,CAAC,IAAI,EAAE,OAAO;oCAAE,WAAU;8CAA0C;;;;;;8CACpF,wVAAC;oCACC,IAAI,CAAC,IAAI,EAAE,OAAO;oCAClB,MAAK;oCACL,aAAY;oCACZ,OAAO,UAAU,kBAAkB;oCACnC,UAAU,CAAC,IAAM,gBAAgB,OAAO,sBAAsB,EAAE,MAAM,CAAC,KAAK;oCAC5E,WAAU;;;;;;;;;;;;sCAGd,wVAAC;4BACC,MAAK;4BACL,SAAS,IAAM,gBAAgB;4BAC/B,WAAU;4BACV,UAAU,gBAAgB,MAAM,KAAK,KAAK,UAAU;sCACrD;;;;;;;mBA7BO;;;;;0BAkCZ,wVAAC;gBACC,MAAK;gBACL,SAAS;gBACT,WAAU;0BACX;;;;;;;;;;;;AAKP;AAEA,wBAAwB,WAAW,GAAG;uCAEvB"}},
    {"offset": {"line": 1161, "column": 0}, "map": {"version":3,"sources":["file:///C:/Users/donov/OneDrive/Escritorio/Escuela/Semester_3/Web_development_final_project/z/refactor_page/public/images/menu_three_bars.svg.mjs%20%28structured%20image%20object%20with%20data%20url%29"],"sourcesContent":["import src from \"IMAGE\";\nexport default { src, width: 256, height: 214, blurWidth: 0, blurHeight: 0};\n"],"names":[],"mappings":";;;;AAAA;;uCACe;IAAE,KAAA,kQAAG;IAAE,OAAO;IAAK,QAAQ;IAAK,WAAW;IAAG,YAAY;AAAC"}},
    {"offset": {"line": 1181, "column": 0}, "map": {"version":3,"sources":["file:///C:/Users/donov/OneDrive/Escritorio/Escuela/Semester_3/Web_development_final_project/z/refactor_page/public/images/menu_cross.svg.mjs%20%28structured%20image%20object%20with%20data%20url%29"],"sourcesContent":["import src from \"IMAGE\";\nexport default { src, width: 201, height: 198, blurWidth: 0, blurHeight: 0};\n"],"names":[],"mappings":";;;;AAAA;;uCACe;IAAE,KAAA,6PAAG;IAAE,OAAO;IAAK,QAAQ;IAAK,WAAW;IAAG,YAAY;AAAC"}},
    {"offset": {"line": 1201, "column": 0}, "map": {"version":3,"sources":["file:///C:/Users/donov/OneDrive/Escritorio/Escuela/Semester_3/Web_development_final_project/z/refactor_page/public/images/favicon.svg.mjs%20%28structured%20image%20object%20with%20data%20url%29"],"sourcesContent":["import src from \"IMAGE\";\nexport default { src, width: 32, height: 32, blurWidth: 0, blurHeight: 0};\n"],"names":[],"mappings":";;;;AAAA;;uCACe;IAAE,KAAA,0PAAG;IAAE,OAAO;IAAI,QAAQ;IAAI,WAAW;IAAG,YAAY;AAAC"}},
    {"offset": {"line": 1218, "column": 0}, "map": {"version":3,"sources":["file:///C:/Users/donov/OneDrive/Escritorio/Escuela/Semester_3/Web_development_final_project/z/refactor_page/src/components/ClientNavbar.tsx"],"sourcesContent":["\"use client\";\n\nimport React, { useEffect, useState } from 'react';\nimport Link from 'next/link';\nimport { useRouter } from 'next/navigation';\nimport AppBar from '@mui/material/AppBar';\nimport Toolbar from '@mui/material/Toolbar';\nimport IconButton from '@mui/material/IconButton';\nimport Typography from '@mui/material/Typography';\nimport Button from '@mui/material/Button';\nimport Box from '@mui/material/Box';\nimport Menu from '@mui/material/Menu';\nimport MenuItem from '@mui/material/MenuItem';\nimport Image from 'next/image';\n\n// Image imports\nimport MenuThreeBarsIcon from '../../public/images/menu_three_bars.svg';\nimport MenuCrossIcon from '../../public/images/menu_cross.svg';\nimport Favicon from '../../public/images/favicon.svg';\n\ninterface ClientNavbarProps {\n  username: string | null;\n  currentPage: string;\n  user: { permsLabel: string } | null;\n}\n\nconst ClientNavbar: React.FC<ClientNavbarProps> = ({ username, currentPage, user }) => {\n  const [anchorElNav, setAnchorElNav] = useState<null | HTMLElement>(null);\n  const router = useRouter();\n\n  const handleOpenNavMenu = (event: React.MouseEvent<HTMLElement>) => {\n    setAnchorElNav(event.currentTarget);\n  };\n\n  const handleCloseNavMenu = () => {\n    setAnchorElNav(null);\n  };\n\n  const handleLogout = async () => {\n    await fetch('/api/auth/logout', { method: 'POST' });\n    router.push('/');\n  };\n\n  console.log(user)\n  const [isAdmin, setIsAdmin] = useState(user && user.permsLabel === 'admin')\n  const [isEditorOrAdmin, setIsEditor] = useState(user && (user.permsLabel === 'admin' || user.permsLabel === 'editor'))\n\n  useEffect(() => {\n    if (user) {\n      setIsAdmin(user.permsLabel === 'admin');\n      setIsEditor(user.permsLabel === 'admin' || user.permsLabel === 'editor');\n    } else {\n      setIsAdmin(false);\n      setIsEditor(false);\n    }\n  }, [user]);\n\n  return (\n    <AppBar position=\"static\" className=\"header\">\n      <Toolbar component=\"nav\" className=\"navbar\">\n        <Link href=\"/\" passHref>\n          <Box component=\"div\" className=\"navbar__logo__anchor\">\n            <Image\n              src={Favicon}\n              alt=\"Logo\"\n              className=\"navbar__logo__img\"\n              width={40}\n              height={40}\n            />\n          </Box>\n        </Link>\n\n        {/* Mobile menu icon and menu */}\n        <Box sx={{ flexGrow: 1, display: { xs: 'flex', md: 'none' }, justifyContent: 'flex-end' }}>\n          <IconButton\n            size=\"large\"\n            aria-label=\"account of current user\"\n            aria-controls=\"menu-appbar\"\n            aria-haspopup=\"true\"\n            onClick={handleOpenNavMenu}\n            color=\"inherit\"\n            className=\"navbar__menu-icon\"\n          >\n            {anchorElNav ? (\n              <Image src={MenuCrossIcon} alt=\"Close menu\" width={30} height={30} />\n            ) : (\n              <Image src={MenuThreeBarsIcon} alt=\"Open menu\" width={30} height={30} />\n            )}\n          </IconButton>\n          <Menu\n            id=\"menu-appbar\"\n            anchorEl={anchorElNav}\n            anchorOrigin={{\n              vertical: 'bottom',\n              horizontal: 'left',\n            }}\n            keepMounted\n            transformOrigin={{\n              vertical: 'top',\n              horizontal: 'left',\n            }}\n            open={Boolean(anchorElNav)}\n            onClose={handleCloseNavMenu}\n            sx={{\n              display: { xs: 'block', md: 'none' },\n            }}\n          >\n            <MenuItem onClick={handleCloseNavMenu}>\n              <Link href=\"/\" passHref>\n                <Typography textAlign=\"center\">Inicio</Typography>\n              </Link>\n            </MenuItem>\n            <MenuItem onClick={handleCloseNavMenu}>\n              <Link href=\"/ia-assistance\" passHref>\n                <Typography textAlign=\"center\">Asistente IA</Typography>\n              </Link>\n            </MenuItem>\n            <MenuItem onClick={handleCloseNavMenu}>\n              <Link href=\"/blog-search\" passHref>\n                <Typography textAlign=\"center\">Blogs</Typography>\n              </Link>\n            </MenuItem>\n            {isAdmin && (\n              <MenuItem onClick={handleCloseNavMenu}>\n                <Link href=\"/manage_perms\" passHref> {/* Changed from /api/perms/users which is an API */}\n                  <Typography textAlign=\"center\">Gestionar Permisos</Typography>\n                </Link>\n              </MenuItem>\n            )}\n            {isEditorOrAdmin && (\n              <MenuItem onClick={handleCloseNavMenu}>\n                <Link href=\"/create-blog\" passHref>\n                  <Typography textAlign=\"center\">Crear Blog</Typography>\n                </Link>\n              </MenuItem>\n            )}\n            <hr className=\"navbar__mobile-separator\" />\n            {username ? (\n              <Box className=\"navbar__user-info\" sx={{ p: 2 }}>\n                <Typography className=\"navbar__username\" variant=\"body1\">{username}</Typography>\n                <Button onClick={handleLogout} className=\"navbar__utils__logout__button\">Logout</Button>\n              </Box>\n            ) : (\n              <Box className=\"navbar__utils__container\" sx={{ flexDirection: 'column', gap: 1, p: 2 }}>\n                {currentPage !== 'login' && (\n                  <Link href=\"/login\" passHref>\n                    <Button className=\"navbar__utils__login__button\" variant=\"contained\">Iniciar sesión</Button>\n                  </Link>\n                )}\n                {currentPage !== 'register' && (\n                  <Link href=\"/register\" passHref>\n                    <Button className=\"navbar__utils__login__button\" variant=\"contained\">Registrarse</Button>\n                  </Link>\n                )}\n              </Box>\n            )}\n          </Menu>\n        </Box>\n\n        {/* Desktop menu */}\n        <Box sx={{ flexGrow: 1, display: { xs: 'none', md: 'flex' }, justifyContent: 'flex-end', alignItems: 'center' }}>\n          <Box component=\"ul\" className=\"navbar__pages__list\" sx={{ display: 'flex', gap: 3, position: 'absolute', left: '50%', transform: 'translateX(-50%)' }}>\n            <li><Link href=\"/\" passHref><Typography>Inicio</Typography></Link></li>\n            <li><Link href=\"/ia-assistance\" passHref><Typography>Asistente IA</Typography></Link></li>\n            <li><Link href=\"/blog-search\" passHref><Typography>Blogs</Typography></Link></li>\n            {isAdmin && (\n              <li><Link href=\"/manage_perms\" passHref><Typography>Gestionar Permisos</Typography></Link></li>\n            )}\n            {isEditorOrAdmin && (\n              <li><Link href=\"/create-blog\" passHref><Typography>Crear Blog</Typography></Link></li>\n            )}\n          </Box>\n          <Box className=\"navbar__utils__container\" sx={{ display: 'flex', gap: 2 }}>\n            {username ? (\n              <Box className=\"navbar__user-info\" sx={{ display: 'flex', alignItems: 'center', gap: 1 }}>\n                <Typography className=\"navbar__username\" variant=\"body1\">{username}</Typography>\n                <Button onClick={handleLogout} className=\"navbar__utils__logout__button\">Logout</Button>\n              </Box>\n            ) : (\n              <>\n                {currentPage !== 'login' && (\n                  <Link href=\"/login\" passHref>\n                    <Button className=\"navbar__utils__login__button\" variant=\"contained\">Iniciar sesión</Button>\n                  </Link>\n                )}\n                {currentPage !== 'register' && (\n                  <Link href=\"/register\" passHref>\n                    <Button className=\"navbar__utils__login__button\" variant=\"contained\">Registrarse</Button>\n                  </Link>\n                )}\n              </>\n            )}\n          </Box>\n        </Box>\n      </Toolbar>\n    </AppBar>\n  );\n};\n\nexport default ClientNavbar;"],"names":[],"mappings":"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"}},
    {"offset": {"line": 1832, "column": 0}, "map": {"version":3,"sources":["file:///C:/Users/donov/OneDrive/Escritorio/Escuela/Semester_3/Web_development_final_project/z/refactor_page/src/app/create-blog/CreateBlogWrapper.tsx"],"sourcesContent":["\"use client\";\n\nimport React, { useState, useRef, useEffect } from 'react';\nimport { useRouter } from 'next/navigation';\nimport Image from 'next/image';\nimport Toast from '@/components/Toast';\n\n// Import Editable Block Components and their Ref/Data Interfaces\nimport EditableHeaderBlock, { EditableHeaderBlockRef, HeaderBlockData } from '@/components/editable-blog-blocks/EditableHeaderBlock';\nimport EditablePureContentBlock, { EditablePureContentBlockRef, PureContentBlockData } from '@/components/editable-blog-blocks/EditablePureContentBlock';\nimport EditablePureImageBlock, { EditablePureImageBlockRef, PureImageBlockData } from '@/components/editable-blog-blocks/EditablePureImageBlock';\nimport EditableImgAndContentBlock, { EditableImgAndContentBlockRef, ImgAndContentBlockData } from '@/components/editable-blog-blocks/EditableImgAndContentBlock';\nimport EditableReferencesBlock, { EditableReferencesBlockRef, ReferencesBlockData } from '@/components/editable-blog-blocks/EditableReferencesBlock';\nimport { IUser } from '@/lib/models/user';\n\n// Interfaces for data structure\ninterface BlogCardData {\n  title: string;\n  description: string;\n  img_url: string; // Public URL of the uploaded image\n}\n\n// Define the union type for all possible block refs\ntype ContentBlockRefType =\n  EditableHeaderBlockRef |\n  EditablePureContentBlockRef |\n  EditablePureImageBlockRef |\n  EditableImgAndContentBlockRef |\n  EditableReferencesBlockRef;\n\n// Define an interface for tracking blocks and their refs\ninterface DynamicContentBlock {\n  id: string; // Unique ID for React key and ref management\n  type: 'Header' | 'PureContent' | 'PureImage' | 'ImgAndContent' | 'References';\n  ref: React.RefObject<ContentBlockRefType>;\n}\n\nimport ClientNavbar from '@/components/ClientNavbar';\n\ninterface CreateBlogWrapperProps {\n  authenticatedUser: IUser;\n}\n\nexport default function CreateBlogWrapper({ authenticatedUser }: CreateBlogWrapperProps) {\n  const router = useRouter();\n  const [cardData, setCardData] = useState<BlogCardData>({ title: '', description: '', img_url: '' });\n  const [cardImageFile, setCardImageFile] = useState<File | null>(null);\n  const [contentBlockRefs, setContentBlockRefs] = useState<DynamicContentBlock[]>([]); // State to manage dynamic block refs\n  const [toastMessage, setToastMessage] = useState<string | null>(null);\n  const cardImageInputRef = useRef<HTMLInputElement>(null);\n\n  const username = authenticatedUser.name;\n  const userPerms = { permsLabel: authenticatedUser.perms };\n  const currentPage = router.pathname ? router.pathname.split('/').pop() : '';\n\n  // --- Image Upload Handlers ---\n  const handleCardImageChange = (event: React.ChangeEvent<HTMLInputElement>) => {\n    if (event.target.files && event.target.files[0]) {\n      setCardImageFile(event.target.files[0]);\n      setCardData(prev => ({ ...prev, img_url: URL.createObjectURL(event.target.files![0]) })); // Show preview\n    } else {\n      setCardImageFile(null);\n      setCardData(prev => ({ ...prev, img_url: '' }));\n    }\n  };\n\n  const handleCardImageDelete = () => {\n    setCardImageFile(null);\n    setCardData(prev => ({ ...prev, img_url: '' }));\n    if (cardImageInputRef.current) cardImageInputRef.current.value = ''; // Clear file input\n  };\n\n  const uploadImage = async (file: File): Promise<string | null> => {\n    const formData = new FormData();\n    formData.append('image', file);\n    try {\n      const response = await fetch('/api/blogs/images', {\n        method: 'POST',\n        body: formData,\n      });\n      if (response.ok) {\n        const data = await response.json();\n        return data.imageUrl;\n      } else {\n        const errorData = await response.json();\n        setToastMessage(errorData.message || 'Error al subir imagen.');\n        return null;\n      }\n    } catch (error) {\n      console.error('Error uploading image:', error);\n      setToastMessage('Error de red al subir imagen.');\n      return null;\n    }\n  };\n\n  // --- Content Block Management ---\n  const addContentBlock = (type: DynamicContentBlock['type']) => {\n    const newBlock: DynamicContentBlock = {\n      id: Date.now().toString(),\n      type,\n      ref: React.createRef<ContentBlockRefType>(),\n    };\n    setContentBlockRefs(prev => [...prev, newBlock]);\n  };\n\n  const removeContentBlock = (id: string) => {\n    setContentBlockRefs(prev => prev.filter(block => block.id !== id));\n  };\n\n\n  // --- Form Submission ---\n  const handleSubmit = async (event: React.FormEvent) => {\n    event.preventDefault();\n    setToastMessage(null);\n\n    // 1. Upload card image if exists\n    let finalCardImgUrl = cardData.img_url;\n    if (cardImageFile) {\n      const imageUrl = await uploadImage(cardImageFile);\n      if (imageUrl) {\n        finalCardImgUrl = imageUrl;\n      } else {\n        return; // Stop submission if image upload failed\n      }\n    } else if (!cardData.img_url) {\n      setToastMessage('La imagen principal de la tarjeta es requerida.');\n      return;\n    }\n\n    // 2. Collect data from all dynamic content blocks\n    const collectedBlocksData: any[] = [];\n    let collectedReferencesData: ReferencesBlockData['blog_references'] = [];\n\n    for (const block of contentBlockRefs) {\n      if (block.ref.current) {\n        const data = block.ref.current.getData();\n        if (block.type === 'References') {\n          // Special handling for references block\n          collectedReferencesData = (data as ReferencesBlockData).blog_references;\n        } else {\n          collectedBlocksData.push({ type: block.type, ...data });\n        }\n      }\n    }\n\n    // 3. Prepare data for API\n    const blogData = {\n      card: { ...cardData, img_url: finalCardImgUrl },\n      content: {\n        blocks: collectedBlocksData,\n      },\n      references: collectedReferencesData,\n    };\n\n    // 4. Submit to API\n    try {\n      const response = await fetch('/api/blogs', {\n        method: 'POST',\n        headers: {\n          'Content-Type': 'application/json',\n        },\n        body: JSON.stringify(blogData),\n      });\n\n      if (response.ok) {\n        const result = await response.json();\n        setToastMessage('Blog creado exitosamente!');\n        router.push(`/blog/${result.blogId}`); // Redirect to new blog post\n      } else {\n        const errorData = await response.json();\n        setToastMessage(errorData.message || 'Error al crear el blog.');\n      }\n    } catch (error) {\n      console.error('Error submitting blog:', error);\n      setToastMessage('Error de red al crear el blog.');\n    }\n  };\n\n  return (\n    <>\n      <ClientNavbar\n        username={username}\n        currentPage={currentPage}\n        user={userPerms}\n      />\n      {toastMessage && <Toast message={toastMessage} severity=\"error\" />}\n\n      <main className=\"container mt-5\">\n        <h1 className=\"mb-4\">Crear Nuevo Blog</h1>\n\n        <form id=\"create-blog-form\" onSubmit={handleSubmit} className=\"space-y-6\">\n          {/* Blog Card Information */}\n          <div className=\"card mb-4 p-4 border rounded-lg shadow-sm bg-white\">\n            <h2 className=\"text-2xl font-bold mb-4\">Información de la Tarjeta del Blog</h2>\n            <div className=\"mb-4\">\n              <label htmlFor=\"card-title\" className=\"block text-sm font-medium text-gray-700\">Título</label>\n              <input\n                type=\"text\"\n                className=\"mt-1 block w-full px-3 py-2 border border-gray-300 rounded-md shadow-sm focus:outline-none focus:ring-indigo-500 focus:border-indigo-500 sm:text-sm\"\n                id=\"card-title\"\n                name=\"card[title]\"\n                required\n                value={cardData.title}\n                onChange={(e) => setCardData(prev => ({ ...prev, title: e.target.value }))}\n              />\n            </div>\n            <div className=\"mb-4\">\n              <label htmlFor=\"card-description\" className=\"block text-sm font-medium text-gray-700\">Descripción</label>\n              <textarea\n                className=\"mt-1 block w-full px-3 py-2 border border-gray-300 rounded-md shadow-sm focus:outline-none focus:ring-indigo-500 focus:border-indigo-500 sm:text-sm resize-y\"\n                id=\"card-description\"\n                name=\"card[description]\"\n                required\n                value={cardData.description}\n                onChange={(e) => setCardData(prev => ({ ...prev, description: e.target.value }))}\n              ></textarea>\n            </div>\n            <div className=\"mb-4\">\n              <label htmlFor=\"card-image-upload\" className=\"block text-sm font-medium text-gray-700\">Subir Imagen Principal</label>\n              <input\n                type=\"file\"\n                className=\"mt-1 block w-full text-sm text-gray-500 file:mr-4 file:py-2 file:px-4 file:rounded-full file:border-0 file:text-sm file:font-semibold file:bg-blue-50 file:text-blue-700 hover:file:bg-blue-100\"\n                id=\"card-image-upload\"\n                accept=\"image/*\"\n                onChange={handleCardImageChange}\n                ref={cardImageInputRef}\n              />\n              {cardData.img_url && (\n                <div className=\"mt-4 flex items-center space-x-4\">\n                  <Image\n                    id=\"card-image-preview\"\n                    src={cardData.img_url}\n                    alt=\"Previsualización de Imagen\"\n                    className=\"rounded-md object-cover\"\n                    width={100}\n                    height={100}\n                  />\n                  <button type=\"button\" className=\"px-3 py-1 bg-red-500 text-white rounded-md hover:bg-red-600 focus:outline-none focus:ring-2 focus:ring-red-500 focus:ring-offset-2\" onClick={handleCardImageDelete}>\n                    Eliminar Imagen\n                  </button>\n                </div>\n              )}\n            </div>\n          </div>\n\n          {/* Dynamic Content Blocks */}\n          <div className=\"card mb-4 p-4 border rounded-lg shadow-sm bg-white\">\n            <h2 className=\"text-2xl font-bold mb-4\">Contenido del Blog</h2>\n            <div id=\"content-blocks-container\" className=\"space-y-4\">\n              {contentBlockRefs.map((block, index) => (\n                <div key={block.id} className=\"content-block-wrapper relative p-4 border border-gray-200 rounded-md\">\n                  {/* Remove Block Button */}\n                  <button\n                    type=\"button\"\n                    onClick={() => removeContentBlock(block.id)}\n                    className=\"absolute top-2 right-2 p-1 text-red-600 hover:text-red-800 text-lg font-bold\"\n                    aria-label=\"Remove block\"\n                  >\n                    &times;\n                  </button>\n\n                  {block.type === 'Header' && <EditableHeaderBlock ref={block.ref as React.RefObject<EditableHeaderBlockRef>} />}\n                  {block.type === 'PureContent' && <EditablePureContentBlock ref={block.ref as React.RefObject<EditablePureContentBlockRef>} />}\n                  {block.type === 'PureImage' && <EditablePureImageBlock ref={block.ref as React.RefObject<EditablePureImageBlockRef>} uploadImage={uploadImage} setToastMessage={setToastMessage} />}\n                  {block.type === 'ImgAndContent' && <EditableImgAndContentBlock ref={block.ref as React.RefObject<EditableImgAndContentBlockRef>} uploadImage={uploadImage} setToastMessage={setToastMessage} />}\n                  {block.type === 'References' && <EditableReferencesBlock ref={block.ref as React.RefObject<EditableReferencesBlockRef>} />}\n                </div>\n              ))}\n            </div>\n\n            <div className=\"mt-6 flex flex-wrap gap-2\">\n              <button type=\"button\" className=\"px-4 py-2 bg-green-600 text-white rounded-md hover:bg-green-700 focus:outline-none focus:ring-2 focus:ring-green-500 focus:ring-offset-2\" onClick={() => addContentBlock('Header')}>Añadir Encabezado</button>\n              <button type=\"button\" className=\"px-4 py-2 bg-green-600 text-white rounded-md hover:bg-green-700 focus:outline-none focus:ring-2 focus:ring-green-500 focus:ring-offset-2\" onClick={() => addContentBlock('PureContent')}>Añadir Párrafo</button>\n              <button type=\"button\" className=\"px-4 py-2 bg-green-600 text-white rounded-md hover:bg-green-700 focus:outline-none focus:ring-2 focus:ring-green-500 focus:ring-offset-2\" onClick={() => addContentBlock('PureImage')}>Añadir Imagen</button>\n              <button type=\"button\" className=\"px-4 py-2 bg-green-600 text-white rounded-md hover:bg-green-700 focus:outline-none focus:ring-2 focus:ring-green-500 focus:ring-offset-2\" onClick={() => addContentBlock('ImgAndContent')}>Añadir Imagen y Contenido</button>\n              <button type=\"button\" className=\"px-4 py-2 bg-green-600 text-white rounded-md hover:bg-green-700 focus:outline-none focus:ring-2 focus:ring-green-500 focus:ring-offset-2\" onClick={() => addContentBlock('References')}>Añadir Referencias</button>\n            </div>\n          </div>\n\n          <button type=\"submit\" className=\"px-6 py-3 bg-blue-600 text-white rounded-md text-lg hover:bg-blue-700 focus:outline-none focus:ring-2 focus:ring-blue-500 focus:ring-offset-2 w-full\">Crear Blog</button>\n        </form>\n      </main>\n    </>\n  );\n}\n"],"names":[],"mappings":"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"}}]
}