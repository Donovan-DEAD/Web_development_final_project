{
  "version": 3,
  "sources": [],
  "sections": [
    {"offset": {"line": 31, "column": 0}, "map": {"version":3,"sources":["file:///C:/Users/donov/OneDrive/Escritorio/Escuela/Semester_3/Web_development_final_project/z/refactor_page/public/images/menu_three_bars.svg.mjs%20%28structured%20image%20object%20with%20data%20url%29"],"sourcesContent":["import src from \"IMAGE\";\nexport default { src, width: 256, height: 214, blurWidth: 0, blurHeight: 0};\n"],"names":[],"mappings":";;;;AAAA;;uCACe;IAAE,KAAA,kQAAG;IAAE,OAAO;IAAK,QAAQ;IAAK,WAAW;IAAG,YAAY;AAAC"}},
    {"offset": {"line": 51, "column": 0}, "map": {"version":3,"sources":["file:///C:/Users/donov/OneDrive/Escritorio/Escuela/Semester_3/Web_development_final_project/z/refactor_page/public/images/menu_cross.svg.mjs%20%28structured%20image%20object%20with%20data%20url%29"],"sourcesContent":["import src from \"IMAGE\";\nexport default { src, width: 201, height: 198, blurWidth: 0, blurHeight: 0};\n"],"names":[],"mappings":";;;;AAAA;;uCACe;IAAE,KAAA,6PAAG;IAAE,OAAO;IAAK,QAAQ;IAAK,WAAW;IAAG,YAAY;AAAC"}},
    {"offset": {"line": 71, "column": 0}, "map": {"version":3,"sources":["file:///C:/Users/donov/OneDrive/Escritorio/Escuela/Semester_3/Web_development_final_project/z/refactor_page/public/images/favicon.svg.mjs%20%28structured%20image%20object%20with%20data%20url%29"],"sourcesContent":["import src from \"IMAGE\";\nexport default { src, width: 32, height: 32, blurWidth: 0, blurHeight: 0};\n"],"names":[],"mappings":";;;;AAAA;;uCACe;IAAE,KAAA,0PAAG;IAAE,OAAO;IAAI,QAAQ;IAAI,WAAW;IAAG,YAAY;AAAC"}},
    {"offset": {"line": 88, "column": 0}, "map": {"version":3,"sources":["file:///C:/Users/donov/OneDrive/Escritorio/Escuela/Semester_3/Web_development_final_project/z/refactor_page/src/components/ClientNavbar.tsx"],"sourcesContent":["\"use client\";\n\nimport React, { useEffect, useState } from 'react';\nimport Link from 'next/link';\nimport { useRouter } from 'next/navigation';\nimport AppBar from '@mui/material/AppBar';\nimport Toolbar from '@mui/material/Toolbar';\nimport IconButton from '@mui/material/IconButton';\nimport Typography from '@mui/material/Typography';\nimport Button from '@mui/material/Button';\nimport Box from '@mui/material/Box';\nimport Menu from '@mui/material/Menu';\nimport MenuItem from '@mui/material/MenuItem';\nimport Image from 'next/image';\n\n// Image imports\nimport MenuThreeBarsIcon from '../../public/images/menu_three_bars.svg';\nimport MenuCrossIcon from '../../public/images/menu_cross.svg';\nimport Favicon from '../../public/images/favicon.svg';\n\ninterface ClientNavbarProps {\n  username: string | null;\n  currentPage: string;\n  user: { permsLabel: string } | null;\n}\n\nconst ClientNavbar: React.FC<ClientNavbarProps> = ({ username, currentPage, user }) => {\n  const [anchorElNav, setAnchorElNav] = useState<null | HTMLElement>(null);\n  const router = useRouter();\n\n  const handleOpenNavMenu = (event: React.MouseEvent<HTMLElement>) => {\n    setAnchorElNav(event.currentTarget);\n  };\n\n  const handleCloseNavMenu = () => {\n    setAnchorElNav(null);\n  };\n\n  const handleLogout = async () => {\n    await fetch('/api/auth/logout', { method: 'POST' });\n    router.push('/');\n  };\n\n  console.log(user)\n  const [isAdmin, setIsAdmin] = useState(user && user.permsLabel === 'admin')\n  const [isEditorOrAdmin, setIsEditor] = useState(user && (user.permsLabel === 'admin' || user.permsLabel === 'editor'))\n\n  useEffect(() => {\n    if (user) {\n      setIsAdmin(user.permsLabel === 'admin');\n      setIsEditor(user.permsLabel === 'admin' || user.permsLabel === 'editor');\n    } else {\n      setIsAdmin(false);\n      setIsEditor(false);\n    }\n  }, [user]);\n\n  return (\n    <AppBar position=\"static\" className=\"header\">\n      <Toolbar component=\"nav\" className=\"navbar\">\n        <Link href=\"/\" passHref>\n          <Box component=\"div\" className=\"navbar__logo__anchor\">\n            <Image\n              src={Favicon}\n              alt=\"Logo\"\n              className=\"navbar__logo__img\"\n              width={40}\n              height={40}\n            />\n          </Box>\n        </Link>\n\n        {/* Mobile menu icon and menu */}\n        <Box sx={{ flexGrow: 1, display: { xs: 'flex', md: 'none' }, justifyContent: 'flex-end' }}>\n          <IconButton\n            size=\"large\"\n            aria-label=\"account of current user\"\n            aria-controls=\"menu-appbar\"\n            aria-haspopup=\"true\"\n            onClick={handleOpenNavMenu}\n            color=\"inherit\"\n            className=\"navbar__menu-icon\"\n          >\n            {anchorElNav ? (\n              <Image src={MenuCrossIcon} alt=\"Close menu\" width={30} height={30} />\n            ) : (\n              <Image src={MenuThreeBarsIcon} alt=\"Open menu\" width={30} height={30} />\n            )}\n          </IconButton>\n          <Menu\n            id=\"menu-appbar\"\n            anchorEl={anchorElNav}\n            anchorOrigin={{\n              vertical: 'bottom',\n              horizontal: 'left',\n            }}\n            keepMounted\n            transformOrigin={{\n              vertical: 'top',\n              horizontal: 'left',\n            }}\n            open={Boolean(anchorElNav)}\n            onClose={handleCloseNavMenu}\n            sx={{\n              display: { xs: 'block', md: 'none' },\n            }}\n          >\n            <MenuItem onClick={handleCloseNavMenu}>\n              <Link href=\"/\" passHref>\n                <Typography textAlign=\"center\">Inicio</Typography>\n              </Link>\n            </MenuItem>\n            <MenuItem onClick={handleCloseNavMenu}>\n              <Link href=\"/ia-assistance\" passHref>\n                <Typography textAlign=\"center\">Asistente IA</Typography>\n              </Link>\n            </MenuItem>\n            <MenuItem onClick={handleCloseNavMenu}>\n              <Link href=\"/blog-search\" passHref>\n                <Typography textAlign=\"center\">Blogs</Typography>\n              </Link>\n            </MenuItem>\n            {isAdmin && (\n              <MenuItem onClick={handleCloseNavMenu}>\n                <Link href=\"/manage_perms\" passHref> {/* Changed from /api/perms/users which is an API */}\n                  <Typography textAlign=\"center\">Gestionar Permisos</Typography>\n                </Link>\n              </MenuItem>\n            )}\n            {isEditorOrAdmin && (\n              <MenuItem onClick={handleCloseNavMenu}>\n                <Link href=\"/create-blog\" passHref>\n                  <Typography textAlign=\"center\">Crear Blog</Typography>\n                </Link>\n              </MenuItem>\n            )}\n            <hr className=\"navbar__mobile-separator\" />\n            {username ? (\n              <Box className=\"navbar__user-info\" sx={{ p: 2 }}>\n                <Typography className=\"navbar__username\" variant=\"body1\">{username}</Typography>\n                <Button onClick={handleLogout} className=\"navbar__utils__logout__button\">Logout</Button>\n              </Box>\n            ) : (\n              <Box className=\"navbar__utils__container\" sx={{ flexDirection: 'column', gap: 1, p: 2 }}>\n                {currentPage !== 'login' && (\n                  <Link href=\"/login\" passHref>\n                    <Button className=\"navbar__utils__login__button\" variant=\"contained\">Iniciar sesión</Button>\n                  </Link>\n                )}\n                {currentPage !== 'register' && (\n                  <Link href=\"/register\" passHref>\n                    <Button className=\"navbar__utils__login__button\" variant=\"contained\">Registrarse</Button>\n                  </Link>\n                )}\n              </Box>\n            )}\n          </Menu>\n        </Box>\n\n        {/* Desktop menu */}\n        <Box sx={{ flexGrow: 1, display: { xs: 'none', md: 'flex' }, justifyContent: 'flex-end', alignItems: 'center' }}>\n          <Box component=\"ul\" className=\"navbar__pages__list\" sx={{ display: 'flex', gap: 3, position: 'absolute', left: '50%', transform: 'translateX(-50%)' }}>\n            <li><Link href=\"/\" passHref><Typography>Inicio</Typography></Link></li>\n            <li><Link href=\"/ia-assistance\" passHref><Typography>Asistente IA</Typography></Link></li>\n            <li><Link href=\"/blog-search\" passHref><Typography>Blogs</Typography></Link></li>\n            {isAdmin && (\n              <li><Link href=\"/manage_perms\" passHref><Typography>Gestionar Permisos</Typography></Link></li>\n            )}\n            {isEditorOrAdmin && (\n              <li><Link href=\"/create-blog\" passHref><Typography>Crear Blog</Typography></Link></li>\n            )}\n          </Box>\n          <Box className=\"navbar__utils__container\" sx={{ display: 'flex', gap: 2 }}>\n            {username ? (\n              <Box className=\"navbar__user-info\" sx={{ display: 'flex', alignItems: 'center', gap: 1 }}>\n                <Typography className=\"navbar__username\" variant=\"body1\">{username}</Typography>\n                <Button onClick={handleLogout} className=\"navbar__utils__logout__button\">Logout</Button>\n              </Box>\n            ) : (\n              <>\n                {currentPage !== 'login' && (\n                  <Link href=\"/login\" passHref>\n                    <Button className=\"navbar__utils__login__button\" variant=\"contained\">Iniciar sesión</Button>\n                  </Link>\n                )}\n                {currentPage !== 'register' && (\n                  <Link href=\"/register\" passHref>\n                    <Button className=\"navbar__utils__login__button\" variant=\"contained\">Registrarse</Button>\n                  </Link>\n                )}\n              </>\n            )}\n          </Box>\n        </Box>\n      </Toolbar>\n    </AppBar>\n  );\n};\n\nexport default ClientNavbar;"],"names":[],"mappings":"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"}},
    {"offset": {"line": 702, "column": 0}, "map": {"version":3,"sources":["file:///C:/Users/donov/OneDrive/Escritorio/Escuela/Semester_3/Web_development_final_project/z/refactor_page/src/components/UserPermsRow.tsx"],"sourcesContent":["\"use client\";\n\nimport React, { useState } from 'react';\nimport TableRow from '@mui/material/TableRow';\nimport TableCell from '@mui/material/TableCell';\nimport Select, { SelectChangeEvent } from '@mui/material/Select';\nimport MenuItem from '@mui/material/MenuItem';\nimport Button from '@mui/material/Button';\nimport { Typography } from '@mui/material';\n\ninterface UserPermsRowProps {\n  user: {\n    _id: string;\n    email: string;\n    name: string;\n    permsLabel: string; // 'admin', 'editor', or 'user'\n  };\n  onPermissionChange: (userId: string, newPerm: string) => void;\n  onDeleteUser: (userId: string) => void;\n}\n\nconst UserPermsRow: React.FC<UserPermsRowProps> = ({ user, onPermissionChange, onDeleteUser }) => {\n  const [selectedPerm, setSelectedPerm] = useState<string>(user.permsLabel);\n\n  const handlePermChange = (event: SelectChangeEvent<string>) => {\n    const newPerm = event.target.value;\n    setSelectedPerm(newPerm);\n    onPermissionChange(user._id, newPerm);\n  };\n\n  const handleDeleteClick = () => {\n    onDeleteUser(user._id);\n  };\n\n  return (\n    <TableRow data-user-id={user._id}>\n      <TableCell>\n        <Typography>{user.email}</Typography>\n      </TableCell>\n      <TableCell>\n        <Typography>{user.name}</Typography>\n      </TableCell>\n      <TableCell>\n        <Select\n          value={selectedPerm}\n          onChange={handlePermChange}\n          displayEmpty\n          inputProps={{ 'aria-label': 'Without label' }}\n          className=\"form-select permission-select\"\n          data-original-permission={user.permsLabel}\n          sx={{ minWidth: 120 }} // Basic styling, use CSS for more control\n        >\n          <MenuItem value=\"admin\">Admin</MenuItem>\n          <MenuItem value=\"editor\">Editor</MenuItem>\n          <MenuItem value=\"user\">User</MenuItem>\n        </Select>\n      </TableCell>\n      <TableCell>\n        <Button\n          variant=\"contained\"\n          color=\"error\"\n          className=\"btn btn-danger delete-user-btn\"\n          onClick={handleDeleteClick}\n        >\n          Eliminar\n        </Button>\n      </TableCell>\n    </TableRow>\n  );\n};\n\nexport default UserPermsRow;\n"],"names":[],"mappings":";;;;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AARA;;;;;;;;;AAqBA,MAAM,eAA4C,CAAC,EAAE,IAAI,EAAE,kBAAkB,EAAE,YAAY,EAAE;IAC3F,MAAM,CAAC,cAAc,gBAAgB,GAAG,IAAA,2TAAQ,EAAS,KAAK,UAAU;IAExE,MAAM,mBAAmB,CAAC;QACxB,MAAM,UAAU,MAAM,MAAM,CAAC,KAAK;QAClC,gBAAgB;QAChB,mBAAmB,KAAK,GAAG,EAAE;IAC/B;IAEA,MAAM,oBAAoB;QACxB,aAAa,KAAK,GAAG;IACvB;IAEA,qBACE,wVAAC,qRAAQ;QAAC,gBAAc,KAAK,GAAG;;0BAC9B,wVAAC,uRAAS;0BACR,cAAA,wVAAC,qUAAU;8BAAE,KAAK,KAAK;;;;;;;;;;;0BAEzB,wVAAC,uRAAS;0BACR,cAAA,wVAAC,qUAAU;8BAAE,KAAK,IAAI;;;;;;;;;;;0BAExB,wVAAC,uRAAS;0BACR,cAAA,wVAAC,iRAAM;oBACL,OAAO;oBACP,UAAU;oBACV,YAAY;oBACZ,YAAY;wBAAE,cAAc;oBAAgB;oBAC5C,WAAU;oBACV,4BAA0B,KAAK,UAAU;oBACzC,IAAI;wBAAE,UAAU;oBAAI;;sCAEpB,wVAAC,qRAAQ;4BAAC,OAAM;sCAAQ;;;;;;sCACxB,wVAAC,qRAAQ;4BAAC,OAAM;sCAAS;;;;;;sCACzB,wVAAC,qRAAQ;4BAAC,OAAM;sCAAO;;;;;;;;;;;;;;;;;0BAG3B,wVAAC,uRAAS;0BACR,cAAA,wVAAC,iRAAM;oBACL,SAAQ;oBACR,OAAM;oBACN,WAAU;oBACV,SAAS;8BACV;;;;;;;;;;;;;;;;;AAMT;uCAEe"}},
    {"offset": {"line": 840, "column": 0}, "map": {"version":3,"sources":["file:///C:/Users/donov/OneDrive/Escritorio/Escuela/Semester_3/Web_development_final_project/z/refactor_page/src/components/Toast.tsx"],"sourcesContent":["\"use client\";\n\nimport React, { useState, useEffect } from 'react';\nimport Snackbar from '@mui/material/Snackbar';\nimport MuiAlert, { AlertProps } from '@mui/material/Alert';\nimport IconButton from '@mui/material/IconButton';\nimport CloseIcon from '@mui/icons-material/Close';\nimport Typography from '@mui/material/Typography';\nimport Box from '@mui/material/Box';\n\ninterface ToastProps {\n  message: string | null;\n  // Optional: type of toast (e.g., 'error', 'success', 'info', 'warning')\n  severity?: 'error' | 'warning' | 'info' | 'success'; \n  duration?: number; // Duration in milliseconds, defaults to 5000\n}\n\n// Custom Alert component to match existing CSS classes if needed\nconst Alert = React.forwardRef<HTMLDivElement, AlertProps>(function Alert(\n  props,\n  ref,\n) {\n  return <MuiAlert elevation={6} ref={ref} variant=\"filled\" {...props} />;\n});\n\nconst Toast: React.FC<ToastProps> = ({ message, severity = 'error', duration = 5000 }) => {\n  const [open, setOpen] = useState(false);\n\n  useEffect(() => {\n    if (message) {\n      setOpen(true);\n    }\n  }, [message]);\n\n  const handleClose = (event?: React.SyntheticEvent | Event, reason?: string) => {\n    if (reason === 'clickaway') {\n      return;\n    }\n    setOpen(false);\n  };\n\n  if (!message) {\n    return null; // Don't render anything if there's no message\n  }\n\n  const action = (\n    <IconButton\n      size=\"small\"\n      aria-label=\"close\"\n      color=\"inherit\"\n      onClick={handleClose}\n    >\n      <CloseIcon fontSize=\"small\" />\n    </IconButton>\n  );\n\n  return (\n    <Snackbar\n      open={open}\n      autoHideDuration={duration}\n      onClose={handleClose}\n      anchorOrigin={{ vertical: 'top', horizontal: 'center' }}\n    >\n      <Alert onClose={handleClose} severity={severity} sx={{ width: '100%' }} className=\"toast-header\">\n        <Box sx={{ display: 'flex', justifyContent: 'space-between', alignItems: 'center', width: '100%' }}>\n          <Typography variant=\"body1\" sx={{ fontWeight: 'bold' }}>\n            {severity === 'error' ? 'Error' : 'Message'} {/* Default to Error or Message */}\n          </Typography>\n          {action}\n        </Box>\n        <Typography variant=\"body2\" className=\"toast-body\">\n          {message}\n        </Typography>\n      </Alert>\n    </Snackbar>\n  );\n};\n\nexport default Toast;\n"],"names":[],"mappings":";;;;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AARA;;;;;;;;;AAiBA,iEAAiE;AACjE,MAAM,sBAAQ,0TAAK,CAAC,UAAU,CAA6B,SAAS,MAClE,KAAK,EACL,GAAG;IAEH,qBAAO,wVAAC,+QAAQ;QAAC,WAAW;QAAG,KAAK;QAAK,SAAQ;QAAU,GAAG,KAAK;;;;;;AACrE;AAEA,MAAM,QAA8B,CAAC,EAAE,OAAO,EAAE,WAAW,OAAO,EAAE,WAAW,IAAI,EAAE;IACnF,MAAM,CAAC,MAAM,QAAQ,GAAG,IAAA,2TAAQ,EAAC;IAEjC,IAAA,4TAAS,EAAC;QACR,IAAI,SAAS;YACX,QAAQ;QACV;IACF,GAAG;QAAC;KAAQ;IAEZ,MAAM,cAAc,CAAC,OAAsC;QACzD,IAAI,WAAW,aAAa;YAC1B;QACF;QACA,QAAQ;IACV;IAEA,IAAI,CAAC,SAAS;QACZ,OAAO,MAAM,8CAA8C;IAC7D;IAEA,MAAM,uBACJ,wVAAC,yRAAU;QACT,MAAK;QACL,cAAW;QACX,OAAM;QACN,SAAS;kBAET,cAAA,wVAAC,+QAAS;YAAC,UAAS;;;;;;;;;;;IAIxB,qBACE,wVAAC,qRAAQ;QACP,MAAM;QACN,kBAAkB;QAClB,SAAS;QACT,cAAc;YAAE,UAAU;YAAO,YAAY;QAAS;kBAEtD,cAAA,wVAAC;YAAM,SAAS;YAAa,UAAU;YAAU,IAAI;gBAAE,OAAO;YAAO;YAAG,WAAU;;8BAChF,wVAAC,2QAAG;oBAAC,IAAI;wBAAE,SAAS;wBAAQ,gBAAgB;wBAAiB,YAAY;wBAAU,OAAO;oBAAO;;sCAC/F,wVAAC,yRAAU;4BAAC,SAAQ;4BAAQ,IAAI;gCAAE,YAAY;4BAAO;;gCAClD,aAAa,UAAU,UAAU;gCAAU;;;;;;;wBAE7C;;;;;;;8BAEH,wVAAC,yRAAU;oBAAC,SAAQ;oBAAQ,WAAU;8BACnC;;;;;;;;;;;;;;;;;AAKX;uCAEe"}},
    {"offset": {"line": 980, "column": 0}, "map": {"version":3,"sources":["file:///C:/Users/donov/OneDrive/Escritorio/Escuela/Semester_3/Web_development_final_project/z/refactor_page/src/app/manage_perms/ManagePermsWrapper.tsx"],"sourcesContent":["\"use client\"\nimport React, { useState, useEffect } from 'react';\nimport { useRouter, useSearchParams } from 'next/navigation';\nimport UserPermsRow from \"@/components/UserPermsRow\";\nimport Table from '@mui/material/Table';\nimport TableBody from '@mui/material/TableBody';\nimport TableCell from '@mui/material/TableCell';\nimport TableContainer from '@mui/material/TableContainer';\nimport TableHead from '@mui/material/TableHead';\nimport TableRow from '@mui/material/TableRow';\nimport Paper from '@mui/material/Paper';\nimport Pagination from '@mui/material/Pagination';\nimport Box from '@mui/material/Box';\nimport { Typography, TextField, Button as MuiButton, Select, MenuItem } from '@mui/material';\nimport Toast from '@/components/Toast'; // Assuming Toast component is generic enough\nimport { IUser } from '@/lib/models/user'; // Import IUser interface\n\ninterface UserDisplay extends IUser {\n  // Add any client-side specific fields if necessary,\n  // but mostly just reusing IUser\n}\n\ninterface ManagePermsWrapperProps {\n  authenticatedUser: IUser;\n}\n\nexport default function ManagePermsWrapper({ authenticatedUser }: ManagePermsWrapperProps) {\n  const [users, setUsers] = useState<UserDisplay[]>([]);\n  const [totalPages, setTotalPages] = useState(1);\n  const [currentPage, setCurrentPage] = useState(1);\n  const [searchTerm, setSearchTerm] = useState('');\n  const [searchField, setSearchField] = useState('email'); // 'email' or 'name'\n  const [loading, setLoading] = useState(true);\n  const [toastMessage, setToastMessage] = useState<string | null>(null);\n  const router = useRouter();\n  const searchParams = useSearchParams();\n\n  const fetchUsers = async (page: number, field?: string, query?: string) => {\n    setLoading(true);\n    setToastMessage(null);\n    try {\n      let url = `/api/users?page=${page}`;\n      if (field && query) {\n        url += `&field=${field}&query=${query}`;\n      }\n      const response = await fetch(url);\n      if (!response.ok) {\n        if (response.status === 401 || response.status === 403) {\n            router.push('/login'); // Redirect to login if API says unauthorized\n            return;\n        }\n        throw new Error('Failed to fetch users.');\n      }\n      const data = await response.json();\n      setUsers(data.users);\n      setTotalPages(data.totalPages);\n      setCurrentPage(data.currentPage);\n    } catch (error: any) {\n      console.error('Error fetching users:', error);\n      setToastMessage(error.message || 'Error al cargar usuarios.');\n    } finally {\n      setLoading(false);\n    }\n  };\n\n  useEffect(() => {\n    // authenticatedUser is guaranteed to be present due to the server component wrapper\n    const pageParam = parseInt(searchParams.get('page') || '1', 10);\n    const fieldParam = searchParams.get('field') || undefined;\n    const queryParam = searchParams.get('query') || undefined;\n    setCurrentPage(pageParam);\n    setSearchField(fieldParam || 'email');\n    setSearchTerm(queryParam || '');\n    fetchUsers(pageParam, fieldParam, queryParam);\n  }, [searchParams]);\n\n\n  const handlePageChange = (event: React.ChangeEvent<unknown>, value: number) => {\n    const params = new URLSearchParams(searchParams.toString());\n    params.set('page', value.toString());\n    router.push(`?${params.toString()}`);\n  };\n\n  const handleSearch = () => {\n    const params = new URLSearchParams(searchParams.toString());\n    params.set('page', '1'); // Reset to first page on new search\n    if (searchTerm) {\n      params.set('field', searchField);\n      params.set('query', searchTerm);\n    } else {\n      params.delete('field');\n      params.delete('query');\n    }\n    router.push(`?${params.toString()}`);\n  };\n\n  const handlePermissionChange = async (userId: string, newPermLabel: string) => {\n    setToastMessage(null);\n    try {\n      const response = await fetch('/api/users', {\n        method: 'POST',\n        headers: { 'Content-Type': 'application/json' },\n        body: JSON.stringify({ id: userId, perm: newPermLabel }),\n      });\n\n      if (response.ok) {\n        setToastMessage('Permiso actualizado con éxito.');\n        fetchUsers(currentPage, searchField, searchTerm); // Refresh data\n      } else {\n        const errorData = await response.json();\n        setToastMessage(errorData.message || 'Error al actualizar el permiso.');\n        if (response.status === 401 || response.status === 403) {\n            router.push('/login'); // Redirect if API says unauthorized\n        }\n      }\n    } catch (error) {\n      console.error('Error updating permission:', error);\n      setToastMessage('Error de red al actualizar permiso.');\n    }\n  };\n\n  const handleDeleteUser = async (userId: string) => {\n    setToastMessage(null);\n    if (!confirm('¿Estás seguro de que quieres eliminar este usuario?')) {\n      return;\n    }\n\n    try {\n      const response = await fetch('/api/users', {\n        method: 'DELETE',\n        headers: { 'Content-Type': 'application/json' },\n        body: JSON.stringify({ id: userId }),\n      });\n\n      if (response.ok) {\n        setToastMessage('Usuario eliminado con éxito.');\n        fetchUsers(currentPage, searchField, searchTerm); // Refresh data\n      } else {\n        const errorData = await response.json();\n        setToastMessage(errorData.message || 'Error al eliminar el usuario.');\n        if (response.status === 401 || response.status === 403) {\n            router.push('/login'); // Redirect if API says unauthorized\n        }\n      }\n    } catch (error) {\n      console.error('Error deleting user:', error);\n      setToastMessage('Error de red al eliminar usuario.');\n    }\n  };\n  \n  return (\n    <>\n      {toastMessage && <Toast message={toastMessage} severity=\"error\" />}\n\n      <div className=\"container mt-5\">\n        <Typography variant=\"h4\" component=\"h1\" gutterBottom>Gestionar Permisos de Usuario</Typography>\n        <hr />\n\n        <Box sx={{ display: 'flex', gap: 2, mb: 3 }}>\n          <TextField\n            label=\"Buscar\"\n            variant=\"outlined\"\n            size=\"small\"\n            value={searchTerm}\n            onChange={(e) => setSearchTerm(e.target.value)}\n            onKeyPress={(e) => { if (e.key === 'Enter') handleSearch(); }}\n          />\n          <Select\n            value={searchField}\n            onChange={(e) => setSearchField(e.target.value)}\n            displayEmpty\n            inputProps={{ 'aria-label': 'Select search field' }}\n            size=\"small\"\n          >\n            <MenuItem value=\"email\">Email</MenuItem>\n            <MenuItem value=\"name\">Nombre</MenuItem>\n          </Select>\n          <MuiButton variant=\"contained\" onClick={handleSearch}>Buscar</MuiButton>\n        </Box>\n\n        <TableContainer component={Paper}>\n          <Table className=\"table table-striped table-hover\">\n            <TableHead className=\"thead-dark\">\n              <TableRow>\n                <TableCell>Email</TableCell>\n                <TableCell>Nombre</TableCell>\n                <TableCell>Permiso</TableCell>\n                <TableCell>Acción</TableCell>\n              </TableRow>\n            </TableHead>\n            <TableBody id=\"user-table-body\">\n              {loading ? (\n                <TableRow>\n                  <TableCell colSpan={4} align=\"center\">Cargando usuarios...</TableCell>\n                </TableRow>\n              ) : (\n                users.length > 0 ? (\n                  users.map((u) => (\n                    <UserPermsRow\n                      key={u._id}\n                      user={u}\n                      onPermissionChange={handlePermissionChange}\n                      onDeleteUser={handleDeleteUser}\n                    />\n                  ))\n                ) : (\n                  <TableRow>\n                    <TableCell colSpan={4} align=\"center\">No se encontraron usuarios.</TableCell>\n                  </TableRow>\n                )\n              )}\n            </TableBody>\n          </Table>\n        </TableContainer>\n\n        {totalPages > 1 && (\n          <Box sx={{ display: 'flex', justifyContent: 'center', mt: 3 }}>\n            <Pagination\n              count={totalPages}\n              page={currentPage}\n              onChange={handlePageChange}\n              color=\"primary\"\n            />\n          </Box>\n        )}\n      </div>\n    </>\n  );\n}\n"],"names":[],"mappings":";;;;;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AAAA;AAAA;AAAA;AAAA;AACA,uZAAwC,6CAA6C;AAdrF;;;;;;;;;;;;;;;;AA0Be,SAAS,mBAAmB,EAAE,iBAAiB,EAA2B;IACvF,MAAM,CAAC,OAAO,SAAS,GAAG,IAAA,2TAAQ,EAAgB,EAAE;IACpD,MAAM,CAAC,YAAY,cAAc,GAAG,IAAA,2TAAQ,EAAC;IAC7C,MAAM,CAAC,aAAa,eAAe,GAAG,IAAA,2TAAQ,EAAC;IAC/C,MAAM,CAAC,YAAY,cAAc,GAAG,IAAA,2TAAQ,EAAC;IAC7C,MAAM,CAAC,aAAa,eAAe,GAAG,IAAA,2TAAQ,EAAC,UAAU,oBAAoB;IAC7E,MAAM,CAAC,SAAS,WAAW,GAAG,IAAA,2TAAQ,EAAC;IACvC,MAAM,CAAC,cAAc,gBAAgB,GAAG,IAAA,2TAAQ,EAAgB;IAChE,MAAM,SAAS,IAAA,yPAAS;IACxB,MAAM,eAAe,IAAA,+PAAe;IAEpC,MAAM,aAAa,OAAO,MAAc,OAAgB;QACtD,WAAW;QACX,gBAAgB;QAChB,IAAI;YACF,IAAI,MAAM,CAAC,gBAAgB,EAAE,MAAM;YACnC,IAAI,SAAS,OAAO;gBAClB,OAAO,CAAC,OAAO,EAAE,MAAM,OAAO,EAAE,OAAO;YACzC;YACA,MAAM,WAAW,MAAM,MAAM;YAC7B,IAAI,CAAC,SAAS,EAAE,EAAE;gBAChB,IAAI,SAAS,MAAM,KAAK,OAAO,SAAS,MAAM,KAAK,KAAK;oBACpD,OAAO,IAAI,CAAC,WAAW,6CAA6C;oBACpE;gBACJ;gBACA,MAAM,IAAI,MAAM;YAClB;YACA,MAAM,OAAO,MAAM,SAAS,IAAI;YAChC,SAAS,KAAK,KAAK;YACnB,cAAc,KAAK,UAAU;YAC7B,eAAe,KAAK,WAAW;QACjC,EAAE,OAAO,OAAY;YACnB,QAAQ,KAAK,CAAC,yBAAyB;YACvC,gBAAgB,MAAM,OAAO,IAAI;QACnC,SAAU;YACR,WAAW;QACb;IACF;IAEA,IAAA,4TAAS,EAAC;QACR,oFAAoF;QACpF,MAAM,YAAY,SAAS,aAAa,GAAG,CAAC,WAAW,KAAK;QAC5D,MAAM,aAAa,aAAa,GAAG,CAAC,YAAY;QAChD,MAAM,aAAa,aAAa,GAAG,CAAC,YAAY;QAChD,eAAe;QACf,eAAe,cAAc;QAC7B,cAAc,cAAc;QAC5B,WAAW,WAAW,YAAY;IACpC,GAAG;QAAC;KAAa;IAGjB,MAAM,mBAAmB,CAAC,OAAmC;QAC3D,MAAM,SAAS,IAAI,gBAAgB,aAAa,QAAQ;QACxD,OAAO,GAAG,CAAC,QAAQ,MAAM,QAAQ;QACjC,OAAO,IAAI,CAAC,CAAC,CAAC,EAAE,OAAO,QAAQ,IAAI;IACrC;IAEA,MAAM,eAAe;QACnB,MAAM,SAAS,IAAI,gBAAgB,aAAa,QAAQ;QACxD,OAAO,GAAG,CAAC,QAAQ,MAAM,oCAAoC;QAC7D,IAAI,YAAY;YACd,OAAO,GAAG,CAAC,SAAS;YACpB,OAAO,GAAG,CAAC,SAAS;QACtB,OAAO;YACL,OAAO,MAAM,CAAC;YACd,OAAO,MAAM,CAAC;QAChB;QACA,OAAO,IAAI,CAAC,CAAC,CAAC,EAAE,OAAO,QAAQ,IAAI;IACrC;IAEA,MAAM,yBAAyB,OAAO,QAAgB;QACpD,gBAAgB;QAChB,IAAI;YACF,MAAM,WAAW,MAAM,MAAM,cAAc;gBACzC,QAAQ;gBACR,SAAS;oBAAE,gBAAgB;gBAAmB;gBAC9C,MAAM,KAAK,SAAS,CAAC;oBAAE,IAAI;oBAAQ,MAAM;gBAAa;YACxD;YAEA,IAAI,SAAS,EAAE,EAAE;gBACf,gBAAgB;gBAChB,WAAW,aAAa,aAAa,aAAa,eAAe;YACnE,OAAO;gBACL,MAAM,YAAY,MAAM,SAAS,IAAI;gBACrC,gBAAgB,UAAU,OAAO,IAAI;gBACrC,IAAI,SAAS,MAAM,KAAK,OAAO,SAAS,MAAM,KAAK,KAAK;oBACpD,OAAO,IAAI,CAAC,WAAW,oCAAoC;gBAC/D;YACF;QACF,EAAE,OAAO,OAAO;YACd,QAAQ,KAAK,CAAC,8BAA8B;YAC5C,gBAAgB;QAClB;IACF;IAEA,MAAM,mBAAmB,OAAO;QAC9B,gBAAgB;QAChB,IAAI,CAAC,QAAQ,wDAAwD;YACnE;QACF;QAEA,IAAI;YACF,MAAM,WAAW,MAAM,MAAM,cAAc;gBACzC,QAAQ;gBACR,SAAS;oBAAE,gBAAgB;gBAAmB;gBAC9C,MAAM,KAAK,SAAS,CAAC;oBAAE,IAAI;gBAAO;YACpC;YAEA,IAAI,SAAS,EAAE,EAAE;gBACf,gBAAgB;gBAChB,WAAW,aAAa,aAAa,aAAa,eAAe;YACnE,OAAO;gBACL,MAAM,YAAY,MAAM,SAAS,IAAI;gBACrC,gBAAgB,UAAU,OAAO,IAAI;gBACrC,IAAI,SAAS,MAAM,KAAK,OAAO,SAAS,MAAM,KAAK,KAAK;oBACpD,OAAO,IAAI,CAAC,WAAW,oCAAoC;gBAC/D;YACF;QACF,EAAE,OAAO,OAAO;YACd,QAAQ,KAAK,CAAC,wBAAwB;YACtC,gBAAgB;QAClB;IACF;IAEA,qBACE;;YACG,8BAAgB,wVAAC,gPAAK;gBAAC,SAAS;gBAAc,UAAS;;;;;;0BAExD,wVAAC;gBAAI,WAAU;;kCACb,wVAAC,qUAAU;wBAAC,SAAQ;wBAAK,WAAU;wBAAK,YAAY;kCAAC;;;;;;kCACrD,wVAAC;;;;;kCAED,wVAAC,2QAAG;wBAAC,IAAI;4BAAE,SAAS;4BAAQ,KAAK;4BAAG,IAAI;wBAAE;;0CACxC,wVAAC,iUAAS;gCACR,OAAM;gCACN,SAAQ;gCACR,MAAK;gCACL,OAAO;gCACP,UAAU,CAAC,IAAM,cAAc,EAAE,MAAM,CAAC,KAAK;gCAC7C,YAAY,CAAC;oCAAQ,IAAI,EAAE,GAAG,KAAK,SAAS;gCAAgB;;;;;;0CAE9D,wVAAC,qTAAM;gCACL,OAAO;gCACP,UAAU,CAAC,IAAM,eAAe,EAAE,MAAM,CAAC,KAAK;gCAC9C,YAAY;gCACZ,YAAY;oCAAE,cAAc;gCAAsB;gCAClD,MAAK;;kDAEL,wVAAC,6TAAQ;wCAAC,OAAM;kDAAQ;;;;;;kDACxB,wVAAC,6TAAQ;wCAAC,OAAM;kDAAO;;;;;;;;;;;;0CAEzB,wVAAC,qTAAS;gCAAC,SAAQ;gCAAY,SAAS;0CAAc;;;;;;;;;;;;kCAGxD,wVAAC,iSAAc;wBAAC,WAAW,+QAAK;kCAC9B,cAAA,wVAAC,+QAAK;4BAAC,WAAU;;8CACf,wVAAC,uRAAS;oCAAC,WAAU;8CACnB,cAAA,wVAAC,qRAAQ;;0DACP,wVAAC,uRAAS;0DAAC;;;;;;0DACX,wVAAC,uRAAS;0DAAC;;;;;;0DACX,wVAAC,uRAAS;0DAAC;;;;;;0DACX,wVAAC,uRAAS;0DAAC;;;;;;;;;;;;;;;;;8CAGf,wVAAC,uRAAS;oCAAC,IAAG;8CACX,wBACC,wVAAC,qRAAQ;kDACP,cAAA,wVAAC,uRAAS;4CAAC,SAAS;4CAAG,OAAM;sDAAS;;;;;;;;;;+CAGxC,MAAM,MAAM,GAAG,IACb,MAAM,GAAG,CAAC,CAAC,kBACT,wVAAC,uPAAY;4CAEX,MAAM;4CACN,oBAAoB;4CACpB,cAAc;2CAHT,EAAE,GAAG;;;;kEAOd,wVAAC,qRAAQ;kDACP,cAAA,wVAAC,uRAAS;4CAAC,SAAS;4CAAG,OAAM;sDAAS;;;;;;;;;;;;;;;;;;;;;;;;;;;oBAQjD,aAAa,mBACZ,wVAAC,2QAAG;wBAAC,IAAI;4BAAE,SAAS;4BAAQ,gBAAgB;4BAAU,IAAI;wBAAE;kCAC1D,cAAA,wVAAC,yRAAU;4BACT,OAAO;4BACP,MAAM;4BACN,UAAU;4BACV,OAAM;;;;;;;;;;;;;;;;;;;AAOpB"}}]
}