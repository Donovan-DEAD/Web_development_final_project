{
  "version": 3,
  "sources": [],
  "sections": [
    {"offset": {"line": 4, "column": 0}, "map": {"version":3,"sources":["C:/Users/donov/OneDrive/Escritorio/Escuela/Semester_3/Web_development_final_project/z/refactor_page/src/components/Toast.tsx"],"sourcesContent":["\"use client\";\n\nimport React, { useState, useEffect } from 'react';\nimport Snackbar from '@mui/material/Snackbar';\nimport MuiAlert, { AlertProps } from '@mui/material/Alert';\nimport IconButton from '@mui/material/IconButton';\nimport CloseIcon from '@mui/icons-material/Close';\nimport Typography from '@mui/material/Typography';\nimport Box from '@mui/material/Box';\n\ninterface ToastProps {\n  message: string | null;\n  // Optional: type of toast (e.g., 'error', 'success', 'info', 'warning')\n  severity?: 'error' | 'warning' | 'info' | 'success'; \n  duration?: number; // Duration in milliseconds, defaults to 5000\n}\n\n// Custom Alert component to match existing CSS classes if needed\nconst Alert = React.forwardRef<HTMLDivElement, AlertProps>(function Alert(\n  props,\n  ref,\n) {\n  return <MuiAlert elevation={6} ref={ref} variant=\"filled\" {...props} />;\n});\n\nconst Toast: React.FC<ToastProps> = ({ message, severity = 'error', duration = 5000 }) => {\n  const [open, setOpen] = useState(false);\n\n  useEffect(() => {\n    if (message) {\n      setOpen(true);\n    }\n  }, [message]);\n\n  const handleClose = (event?: React.SyntheticEvent | Event, reason?: string) => {\n    if (reason === 'clickaway') {\n      return;\n    }\n    setOpen(false);\n  };\n\n  if (!message) {\n    return null; // Don't render anything if there's no message\n  }\n\n  const action = (\n    <IconButton\n      size=\"small\"\n      aria-label=\"close\"\n      color=\"inherit\"\n      onClick={handleClose}\n    >\n      <CloseIcon fontSize=\"small\" />\n    </IconButton>\n  );\n\n  return (\n    <Snackbar\n      open={open}\n      autoHideDuration={duration}\n      onClose={handleClose}\n      anchorOrigin={{ vertical: 'top', horizontal: 'center' }}\n    >\n      <Alert onClose={handleClose} severity={severity} sx={{ width: '100%' }} className=\"toast-header\">\n        <Box sx={{ display: 'flex', justifyContent: 'space-between', alignItems: 'center', width: '100%' }}>\n          <Typography variant=\"body1\" sx={{ fontWeight: 'bold' }}>\n            {severity === 'error' ? 'Error' : 'Message'} {/* Default to Error or Message */}\n          </Typography>\n          {action}\n        </Box>\n        <Typography variant=\"body2\" className=\"toast-body\">\n          {message}\n        </Typography>\n      </Alert>\n    </Snackbar>\n  );\n};\n\nexport default Toast;\n"],"names":["c","_c","React","useState","useEffect","Snackbar","MuiAlert","AlertProps","IconButton","CloseIcon","Typography","Box","ToastProps","message","severity","duration","Alert","forwardRef","HTMLDivElement","props","ref","$","$i","Symbol","for","t0","Toast","FC","t1","t2","undefined","open","setOpen","t3","t4","t5","event","reason","handleClose","t6","action","t7","vertical","horizontal","t8","width","t9","display","justifyContent","alignItems","t10","fontWeight","t11","t12","t13","t14","t15"],"mappings":"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","ignoreList":[]}},
    {"offset": {"line": 274, "column": 0}, "map": {"version":3,"sources":["C:/Users/donov/OneDrive/Escritorio/Escuela/Semester_3/Web_development_final_project/z/refactor_page/src/components/IAToast.tsx"],"sourcesContent":["\"use client\";\n\nimport React from 'react';\nimport Toast from './Toast'; // Assuming Toast.tsx is in the same directory\n\ninterface IAToastProps {\n  message: string | null;\n  severity?: 'error' | 'warning' | 'info' | 'success';\n}\n\nconst IAToast: React.FC<IAToastProps> = ({ message, severity = 'info' }) => {\n  // This component acts as a wrapper around the generic Toast component\n  // to provide a specific context or default styling for IA assistance toasts.\n  // The original EJS partial was largely a container for a Bootstrap toast.\n\n  // The Toast component already handles the display logic (open/close, duration).\n  // We just need to pass the message and desired severity.\n  return (\n    <Toast message={message} severity={severity} />\n  );\n};\n\nexport default IAToast;\n"],"names":["c","_c","React","Toast","IAToastProps","message","severity","IAToast","FC","t0","$","$i","Symbol","for","t1","undefined","t2"],"mappings":";;;;;AAAa,SAAAA,CAAA,IAAAC,EAAA;AAGb,OAAOE,KAAK,MAAM,SAAS,CAAC,iYAAC,8CAAA;AAH7B,YAAY;;;;AAUZ,iBAAwCM,EAAA;IAAA,MAAAC,CAAA,OAAAT,0RAAA,EAAA;IAAA,IAAAS,CAAA,CAAA,EAAA,KAAA,oEAAA;QAAA,IAAA,IAAAC,EAAA,GAAA,GAAAA,EAAA,GAAA,GAAAA,EAAA,IAAA,EAAA;YAAAD,CAAA,CAAAC,EAAA,CAAA,GAAAC,MAAA,CAAAC,GAAA,CAAA;QAAA;QAAAH,CAAA,CAAA,EAAA,GAAA;IAAA;IAAC,MAAA,EAAAL,OAAA,EAAAC,QAAA,EAAAQ,EAAAA,EAAA,GAAAL,EAA8B;IAAnB,MAAAH,QAAA,GAAAQ,EAAiB,KAAjBC,SAAiB,GAAjB,MAAiB,GAAjBD,EAAiB;IAAA,IAAAE,EAAA;IAAA,IAAAN,CAAA,CAAA,EAAA,KAAAL,OAAA,IAAAK,CAAA,CAAA,EAAA,KAAAJ,QAAA,EAAA;QAQjEU,EAAA,iBAAA,uSAAC,mPAAK;YAAUX,OAAO,CAAPA,CAAAA,OAAM,CAAC;YAAYC,QAAQ,CAARA,CAAAA,QAAO,CAAC,GAAI;;;;;;QAAAI,CAAA,CAAA,EAAA,GAAAL,OAAA;QAAAK,CAAA,CAAA,EAAA,GAAAJ,QAAA;QAAAI,CAAA,CAAA,EAAA,GAAAM,EAAA;IAAA,OAAA;QAAAA,EAAA,GAAAN,CAAA,CAAA,EAAA;IAAA;IAAA,OAA/CM,EAA+C;AAAA,CAElD;KAVKT,OAAO,EAAEL,KAAK,CAACM,EAAE,CAACJ,YAAY,CAAC;uCAYtBG,OAAO","ignoreList":[]}},
    {"offset": {"line": 327, "column": 0}, "map": {"version":3,"sources":["file:///C:/Users/donov/OneDrive/Escritorio/Escuela/Semester_3/Web_development_final_project/z/refactor_page/public/images/camera_icon.svg.mjs%20%28structured%20image%20object%20with%20data%20url%29"],"sourcesContent":["import src from \"IMAGE\";\nexport default { src, width: 800, height: 800, blurWidth: 0, blurHeight: 0};\n"],"names":[],"mappings":";;;;AAAA;;uCACe;IAAE,KAAA,8PAAG;IAAE,OAAO;IAAK,QAAQ;IAAK,WAAW;IAAG,YAAY;AAAC"}},
    {"offset": {"line": 350, "column": 0}, "map": {"version":3,"sources":["file:///C:/Users/donov/OneDrive/Escritorio/Escuela/Semester_3/Web_development_final_project/z/refactor_page/public/images/upload_icon.svg.mjs%20%28structured%20image%20object%20with%20data%20url%29"],"sourcesContent":["import src from \"IMAGE\";\nexport default { src, width: 800, height: 800, blurWidth: 0, blurHeight: 0};\n"],"names":[],"mappings":";;;;AAAA;;uCACe;IAAE,KAAA,8PAAG;IAAE,OAAO;IAAK,QAAQ;IAAK,WAAW;IAAG,YAAY;AAAC"}},
    {"offset": {"line": 373, "column": 0}, "map": {"version":3,"sources":["file:///C:/Users/donov/OneDrive/Escritorio/Escuela/Semester_3/Web_development_final_project/z/refactor_page/public/images/image_upload_already.svg.mjs%20%28structured%20image%20object%20with%20data%20url%29"],"sourcesContent":["import src from \"IMAGE\";\nexport default { src, width: 24, height: 24, blurWidth: 0, blurHeight: 0};\n"],"names":[],"mappings":";;;;AAAA;;uCACe;IAAE,KAAA,uQAAG;IAAE,OAAO;IAAI,QAAQ;IAAI,WAAW;IAAG,YAAY;AAAC"}},
    {"offset": {"line": 396, "column": 0}, "map": {"version":3,"sources":["file:///C:/Users/donov/OneDrive/Escritorio/Escuela/Semester_3/Web_development_final_project/z/refactor_page/public/images/bulb_icon.svg.mjs%20%28structured%20image%20object%20with%20data%20url%29"],"sourcesContent":["import src from \"IMAGE\";\nexport default { src, width: 800, height: 800, blurWidth: 0, blurHeight: 0};\n"],"names":[],"mappings":";;;;AAAA;;uCACe;IAAE,KAAA,4PAAG;IAAE,OAAO;IAAK,QAAQ;IAAK,WAAW;IAAG,YAAY;AAAC"}},
    {"offset": {"line": 416, "column": 0}, "map": {"version":3,"sources":["C:/Users/donov/OneDrive/Escritorio/Escuela/Semester_3/Web_development_final_project/z/refactor_page/src/app/ia-assistance/page.tsx"],"sourcesContent":["\"use client\";\n\nimport React, { useState, useRef } from 'react';\nimport { useRouter } from 'next/navigation';\nimport IAToast from \"@/components/IAToast\"; // Using the IAToast wrapper\nimport Image from 'next/image';\n\n// Image imports\nimport CameraIcon from '../../../public/images/camera_icon.svg';\nimport UploadIcon from '../../../public/images/upload_icon.svg';\nimport ImageUploadAlreadyIcon from '../../../public/images/image_upload_already.svg';\nimport BulbIcon from '../../../public/images/bulb_icon.svg';\n\nexport default function IaAssistancePage() {\n  const [context, setContext] = useState('');\n  const [imageFile, setImageFile] = useState<File | null>(null);\n  const [toastMessage, setToastMessage] = useState<string | null>(null);\n  const router = useRouter();\n  const fileInputRef = useRef<HTMLInputElement>(null);\n\n  // Placeholder for user data\n  const username = null; // Or fetch from context/session\n  const user = null; // Or fetch from context/session\n\n  const handleFileChange = (event: React.ChangeEvent<HTMLInputElement>) => {\n    if (event.target.files && event.target.files[0]) {\n      const file = event.target.files[0];\n      if (file.size > 10 * 1024 * 1024) { // 10MB limit\n        setToastMessage('La imagen excede el límite de 10MB.');\n        setImageFile(null);\n        if (fileInputRef.current) fileInputRef.current.value = ''; // Clear file input\n        return;\n      }\n      setImageFile(file);\n      setToastMessage(null);\n    }\n  };\n\n  const handleSubmit = async (event: React.FormEvent) => {\n    event.preventDefault();\n    setToastMessage(null); // Clear previous messages\n\n    if (!context && !imageFile) {\n      setToastMessage('Favor de proporcionar un contexto o una imagen.');\n      return;\n    }\n\n    const formData = new FormData();\n    if (context) {\n      formData.append('context', context);\n    }\n    if (imageFile) {\n      formData.append('image', imageFile);\n    }\n\n    try {\n      const response = await fetch('/api/ai/consult', {\n        method: 'POST',\n        body: formData,\n        // Next.js handles 'Content-Type': 'multipart/form-data' automatically with FormData\n      });\n\n      const data = await response.json();\n      console.log('AI Consultation Response:', data);\n\n      if (response.ok) {\n        // Original EJS redirected to /ia-response and passed data via session.\n        // Here, we can pass data via URL params or a global state, or simply redirect.\n        // For simplicity, we'll store in sessionStorage and redirect.\n        sessionStorage.setItem('iaResponseData', JSON.stringify(data));\n        router.push('/ia-response');\n      } else {\n        setToastMessage(data.message || 'Hubo un error al procesar la solicitud.');\n      }\n    } catch (error) {\n      console.error('Error submitting AI consultation:', error);\n      setToastMessage('Error de red o del servidor. Por favor, inténtalo de nuevo.');\n    }\n  };\n\n  return (\n    <>\n      {toastMessage && <IAToast message={toastMessage} severity=\"error\" />}\n\n      <main className=\"ai__assistance__main\">\n        <div className=\"ai_assistance__header__container\">\n          <h1 className=\"ai_assistance__header__title\">Asesoría IA Agrícola</h1>\n          <p className=\"ai_assistance__header__description\">\n            Sube una imagen de tu cultivo y obtén recomendaciones personalizadas\n          </p>\n        </div>\n        <form id=\"ai-form\" className=\"ai__assistance__form__container\" onSubmit={handleSubmit}>\n          <div className=\"ai__assistance__form__container__left\">\n            <p className=\"ai__assistance__form__container__left__title\">\n              <Image src={CameraIcon} alt=\"Camera Icon\" width={30} height={30} />\n              Imagen del cultivo\n            </p>\n\n            {!imageFile ? (\n              <div id=\"upload-initial-state\" className=\"ai__assistance__form__container__left__container\">\n                <Image className=\"ai__assistance__form__container__left__container__img\" src={UploadIcon} alt=\"Upload Icon\" width={40} height={40} />\n                <h1 className=\"ai__assistance__form__container__left__container__title\">\n                  Sube una imagen de tu cultivo\n                </h1>\n                <p className=\"ai__assistance__form__container__left__container__description\">\n                  PNG, JPG hasta 10MB\n                </p>\n                <label htmlFor=\"image-upload\" className=\"ai__assistance__form__container__left__container__button\">\n                  Seleccionar imagen\n                </label>\n                <input\n                  id=\"image-upload\"\n                  type=\"file\"\n                  accept=\"image/*\"\n                  style={{ display: 'none' }}\n                  name=\"image\"\n                  onChange={handleFileChange}\n                  ref={fileInputRef}\n                />\n              </div>\n            ) : (\n              <div id=\"upload-finished-state\" className=\"ai__assistance__form__container__left__container\">\n                <Image className=\"ai__assistance__form__container__left__container__img\" src={ImageUploadAlreadyIcon} alt=\"Image Uploaded Icon\" width={40} height={40} />\n                <h1 id=\"file-name\" className=\"ai__assistance__form__container__left__container__title\">\n                  {imageFile.name}\n                </h1>\n                <p className=\"ai__assistance__form__container__left__container__description\">\n                  PNG, JPG hasta 10MB\n                </p>\n                <label htmlFor=\"image-upload\" className=\"ai__assistance__form__container__left__container__button\">\n                  Cambiar imagen\n                </label>\n                <input\n                  id=\"image-upload\"\n                  type=\"file\"\n                  accept=\"image/*\"\n                  style={{ display: 'none' }}\n                  name=\"image\"\n                  onChange={handleFileChange}\n                  ref={fileInputRef}\n                />\n              </div>\n            )}\n          </div>\n\n          <div className=\"ai__assistance__form__container__right\">\n            <p className=\"ai__assistance__form__container__right__title\">Contexto de la situacion</p>\n            <textarea\n              id=\"context\"\n              className=\"ai__assistance__form__container__right__input\"\n              rows={4}\n              cols={50}\n              name=\"context\"\n              placeholder=\"Describe la situacion de tu cultivo: síntomas observados, condiciones climaticas, tipo de suelo, tratamientos previos...\"\n              value={context}\n              onChange={(e) => setContext(e.target.value)}\n            ></textarea>\n            <button type=\"submit\" className=\"ai__assistance__form__container__right__button\">\n              <Image className=\"ai__assistance__form__container__right__button__img\" src={BulbIcon} alt=\"Bulb Icon\" width={20} height={20} />\n              Obtener Asesoría\n            </button>\n          </div>\n        </form>\n      </main>\n    </>\n  );\n}\n"],"names":["React","useState","useRef","useRouter","IAToast","Image","CameraIcon","UploadIcon","ImageUploadAlreadyIcon","BulbIcon","IaAssistancePage","context","setContext","imageFile","setImageFile","File","toastMessage","setToastMessage","router","fileInputRef","HTMLInputElement","username","user","handleFileChange","event","ChangeEvent","target","files","file","size","current","value","handleSubmit","FormEvent","preventDefault","formData","FormData","append","response","fetch","method","body","data","json","console","log","ok","sessionStorage","setItem","JSON","stringify","push","message","error","display","name","e"],"mappings":"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","ignoreList":[]}}]
}